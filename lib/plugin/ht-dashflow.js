!function(Z){"use strict";var W="ht",O=Z[W],c=O.Default,A=Math,S=(A.PI,A.sin,A.cos,A.atan2,A.sqrt,A.max),M=A.floor,e=(A.round,A.ceil),w=O.Shape,B=(O.Edge,O.List),D=O.Style,m=O.graph,E=c.getInternal(),h=E.ui(),F=null,P="prototype",o=Z.clearInterval,t=Z.setInterval,s=function(X){var j=X.data,b=this.dm();if(j&&"add"===X.kind){var d=b.$1c,D=j instanceof w?"shape.":"edge.";d&&j.s(D+"dash.flow")&&d.indexOf(j)<0&&d.push(j)}"clear"===X.kind&&(b.$1c=[])},X=function(v){var Z=v.property,a=v.data,X=v.newValue,q=this.dm().$1c,N=a instanceof w?"s:shape.dash.flow":"s:edge.dash.flow";if(q&&Z===N)if(X)q.indexOf(a)<0&&q.push(a);else for(var B=q.length,l=0;B>l;l++)if(q[l]===a){q.splice(l,1);break}},j=m.GraphView[P],y=h.EdgeUI[P],R=h.ShapeUI[P],J=R._80o,k=y._80o,v=O.DataModel[P],K=v.prepareRemove,U=j.setDataModel;D["edge.dash.flow.step"]==F&&(D["edge.dash.flow.step"]=3),D["shape.dash.flow.step"]==F&&(D["shape.dash.flow.step"]=3),v.prepareRemove=function(e){K.call(this,e);var P=e._dataModel,B=P.$1c;if(B)for(var w=B.length,F=0;w>F;F++)if(B[F]===e){B.splice(F,1);break}},j.setDataModel=function(L){var D=this,r=D._dataModel;if(r!==L){r&&(r.umm(s,D),r.umd(X,D),r.$1c=[]),L.mm(s,D),L.md(X,D);var f=L.$1c=[];L.each(function(p){var U=p instanceof w?"shape.":"edge.";p.s(U+"dash.flow")&&f.indexOf(p)<0&&f.push(p)}),U.call(D,L)}},j.setDashFlowInterval=function(X){var C=this,j=C.$2c;C.$2c=X,C.fp("dashFlowInterval",j,X),C.$3c!=F&&(o(C.$3c),delete C.$3c,C.enableDashFlow(X))},j.getDashFlowInterval=function(){return this.$2c},j.$4c=function(){var r,j,N,J=this,u=J.tx(),U=J.ty(),d=J._zoom,$=J.getWidth(),p=J.getHeight(),g={x:-u/d,y:-U/d,width:$/d,height:p/d},k=J.dm().$1c,f=J._56I,z=new B;if(k.forEach(function(w){f[w.getId()]&&(r=J.getDataUI(w),r&&(N=r._79o(),N&&z.add(N)))}),0!==z.size()&&(z.each(function(u){c.intersectsRect(g,u)&&(j=c.unionRect(j,u))}),j&&(j&&(c.grow(j,S(1,1/d)),j.x=M(j.x*d)/d,j.y=M(j.y*d)/d,j.width=e(j.width*d)/d,j.height=e(j.height*d)/d,j=c.intersection(g,j)),j))){var m=J._canvas.getContext("2d");m.save(),m.lineCap=c.lineCap,m.lineJoin=c.lineJoin;var y=c.devicePixelRatio,o=j.x,v=j.y,t=j.width,I=j.height;o=Math.floor((o*d+u)*y),v=Math.floor((v*d+U)*y),t=Math.ceil(t*d*y)+1,I=Math.ceil(I*d*y)+1,j.x=(o/y-u)/d,j.y=(v/y-U)/d,j.width=t/y/d,j.height=I/y/d,m.beginPath(),m.rect(o,v,t,I),m.clip(),m.clearRect(o,v,t,I),E.translateAndScale(m,u,U,d),J.$5c(m,j),m.restore()}},j.$5c=function(Q,y){var D,I,v=this;v._93db(Q),v.each(function(R){v._56I[R._id]&&(D=v.getDataUI(R),D&&(I=D._79o(),(!y||c.intersectsRect(y,I))&&(D.$7c=!0,D._42(Q),delete D.$7c)))}),v._92db(Q)},j.enableDashFlow=function(E){var $=this;$.$3c==F&&($.$3c=t(function(){$.$4c()},E||$.$2c||50))},j.disableDashFlow=function(){var E=this;o(E.$3c),delete E.$3c};var d=function(){var n=this,m=n._data,P=m instanceof w?"shape.":"edge.",R=m.s(P+"dash.pattern"),i=m.s(P+"dash.flow.reverse");if(R&&m.s(P+"dash")&&m.s(P+"dash.flow")&&n.$7c){var _=n.s(P+"dash.offset")||0,u=m.s(P+"dash.flow.step"),o=m.getStyleMap(),W=0;R.forEach(function(q){W+=q}),i&&(u=-u),_-=u,_%=W,o||(m._styleMap=o={}),o[P+"dash.offset"]=_}};y._80o=function(l){k.call(this,l),d.call(this)},R._80o=function(P){J.call(this,P),d.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);