!function(g,y){"use strict";var n="ht",M=n+".graph.",I=g[n],j=I.graph,W=I.Default,e=I.Color,t=null,s="px",D=W.getInternal(),u=D.getPinchDist,w=W.preventDefault,$=W.getTouchCount,A=W.startDragging;D.addMethod(W,{overviewBackground:e.widgetBackground,overviewMaskBackground:e.transparent,overviewContentBorderColor:e.widgetBorder,overviewContentBackground:e.background},!0),j.Overview=function(P){var g=this,t=g._view=D.createView(1,g);g._canvas=D.createCanvas(t),t.style.background=W.overviewBackground,t.appendChild(g._mask=D.createDiv()),g.setGraphView(P),g.addListeners()},W.def(M+"Overview",y,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:W.overviewMaskBackground,_contentBorderColor:W.overviewContentBorderColor,_contentBackground:W.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(I){var O=this;if(O.gv!==I){var u=O.gv;O.gv=I,u&&(u.removeViewListener(O.handleGraphViewChanged,O),u.ump(O.handleGraphViewPropertyChanged,O)),I&&(I.addViewListener(O.handleGraphViewChanged,O),I.mp(O.handleGraphViewPropertyChanged,O)),O.fp("graphView",u,I),O.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function($){this._autoUpdate&&"validate"===$.kind&&this.redraw()},handleGraphViewPropertyChanged:function(n){("canvasBackground"===n.property||this.getFixToRect()&&("zoom"===n.property||"translateX"===n.property||"translateY"===n.property))&&this.redraw()},redraw:function(){var o=this;o._redraw||(o._redraw=1,o.iv(50))},validateImpl:function(){var M=this,j=M.gv,d=M._canvas,k=M.getWidth(),o=M.getHeight(),B=M._redraw;if(j){var p=M._mask,x=p.style,i=j.getViewRect(),l=this.getFixToRect(),_=l?"boolean"==typeof l?j.getContentRect():l:j.getScrollRect(),z=_.x,Z=_.y,R=_.width,f=_.height,b=M._rate=Math.max(R/k,f/o),S=M._x=(k-R/b)/2,Y=M._y=(o-f/b)/2;if(0!==i.width&&0!==i.height||M.hasRetry||(W.callLater(M.iv,M,t),M.hasRetry=!0),(k!==d.clientWidth||o!==d.clientHeight)&&(D.setCanvas(d,k,o),B=1),D.isSameRect(_,M._scrollRect)||(M._scrollRect=_,B=1),B){var A=D.initContext(d),K=j.getDataModel(),L=K.getBackground()||M._contentBackground,E=M._contentBorderColor,c=W.devicePixelRatio;A.clearRect(0,0,k*c,o*c);var V=K.getBackground()&&K.a("width")>0&&K.a("height")>0;L&&!V&&D.fillRect(A,S*c,Y*c,R/b*c,f/b*c,L),D.translateAndScale(A,-z/b+S,-Z/b+Y,1/b),j._42(A),A.restore(),E&&D.drawBorder(A,E,S*c,Y*c,R/b*c,f/b*c)}x.background=M._maskBackground,x.left=S+(i.x-z)/b+s,x.top=Y+(i.y-Z)/b+s,x.width=i.width/b+s,x.height=i.height/b+s,M._redraw=null}else if(B){var A=D.initContext(d);A.clearRect(0,0,k,o),A.restore(),M._redraw=null}},center:function(o){var w=this,S=w.gv;if(S){var s=S._zoom,$=S._29I,P=w._rate,Y=w._scrollRect,G=W.getLogicalPoint(o,w._canvas),q=Y.x+(G.x-w._x)*P,h=Y.y+(G.y-w._y)*P;S.setTranslate(($.width/2-q)*s,($.height/2-h)*s)}},handle_mousedown:function($){this.handle_touchstart($)},handleWindowMouseUp:function(m){this.handleWindowTouchEnd(m)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handle_mousewheel:function(C){this.handleScroll(C,C.wheelDelta)},handle_DOMMouseScroll:function(p){2===p.axis&&this.handleScroll(p,-p.detail)},handleScroll:function(R,J){if(w(R),this.gv){var h=this.gv;J>0?h.scrollZoomIn():0>J&&h.scrollZoomOut()}},handle_touchstart:function(D){if(w(D),this.gv&&W.isLeftButton(D)){var r=this,z=r.gv,e=$(D);1===e?W.isDoubleClick(D)&&z.isResettable()?z.reset():(r.center(D),A(r,D)):2===e&&(r._dist=u(D),A(r,D))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(k){if(this.gv){var x=this,A=x._dist,Y=$(k);1===Y?x.center(k):2===Y&&A!=t&&x.gv.handlePinch(t,u(k),A)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);