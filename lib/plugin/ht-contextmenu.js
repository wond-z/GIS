!function(C,U){"use strict";var t="ht",J=C[t],c="position",m="absolute",T="px",I="left",S="top",A="innerHTML",b="className",K="width",Y="height",k="0",O="display",j="none",D="visibility",d="user-select",l="margin",y="padding",R=null,$=J.Color,V=J.Default,h=V.getInternal(),a=C.setTimeout,x=C.setInterval,w=C.clearTimeout,P=C.clearInterval,p=C.parseInt,n=V.isLeftButton,B=V.isDragging,u=V.startDragging,e=V.getDistance,s=V.isTouchable,q=$.widgetIconHighlight,G=$.widgetIconBorder,E=$.widgetIconGradient,o=function(){return document},X=function(o,i){return o.querySelectorAll(i)},L=function(q){var X=o().createElement(q);return"ul"===q&&(H(X,c,"relative"),H(X,l,k),H(X,y,k),H(X,"list-style",j),H(X,"box-sizing","border-box"),H(X,"-moz-box-sizing","border-box"),H(X,O,"inline-block"),H(X,"vertical-align","text-bottom"),H(X,"border","1px solid "+V.contextMenuBorderColor),H(X,"box-shadow","0 0 16px 1px "+V.contextMenuShadowColor),H(X,"overflow","hidden"),V.contextMenuBorderRadius&&H(X,"border-radius",V.contextMenuBorderRadius+T)),X},F=function(A){var T=A.touches[0];return T?T:A.changedTouches[0]},M=function(){return L("div")},Q=function(){return L("canvas")},H=function(D,z,I){D.style.setProperty(z,I,R)},N=function(f,y,d){V.def(J.widget[f],y,d)},i=function(i,K){i.appendChild(K)},r=function(D,o){D.removeChild(o)},W=h.addEventListener,g=h.removeEventListener;h.addMethod(V,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:G},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:q}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:G},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:q,gradient:V.imageGradient,gradientColor:E,background:q}]},contextMenuLabelFont:(s?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var z=function(a){var y=this,I=a._view;if(y.$11b=a,y.addListeners(),W(I,"contextmenu",function(S){S.preventDefault()}),!s){var F=y.$37b=y.$36b.bind(y);W(I,"mouseover",F),W(I,"mouseout",F)}};V.def(z,U,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(H){if(V.preventDefault(H),n(H)){for(var y=this,P=y.$11b,l=y.getView(),$=l.children,J=0;J<$.length;J++){var q=$[J],p=q.$24b,E=q.$25b;if(p&&p.contains(H.target))return P.scrollUp(q),y.$28b=a(function(){y.$29b=x(function(){P.scrollUp(q)},100)},500),u(y,H),void 0;if(E&&E.contains(H.target))return P.scrollDown(q),y.$28b=a(function(){y.$29b=x(function(){P.scrollDown(q)},100)},500),u(y,H),void 0}s&&(H=F(H)),y.$30b={x:H.pageX,y:H.pageY}}},handle_mousedown:function(V){this.handle_touchstart(V)},handle_touchend:function(z){if(n(z)){var K=this,H=K.$30b,l=s?{x:F(z).pageX,y:F(z).pageY}:{x:z.pageX,y:z.pageY};if(!H||e(H,l)>1)return delete K.$30b,void 0;for(var c=K.getView(),u=K.$11b,G=z.target,Z=R,k=R,t=u._items,g=c.$26b,x=0;x<g.length;x++)if(k=g[x],k.contains(G)){Z=k.getAttribute("data-id");break}if(Z&&t){var O=u.$17b(t,function(l){return l._id===Z});if(O){var p=!1;O.disabled instanceof Function?p=O.disabled.call(u,O):O.disabled===!0&&(p=!0),p||(O.items?s&&K.$36b(k,!0):u.$1b(O,z))}}delete K.$30b}},$36b:function(N,K){if(!B()){var U,E=this,M=E.$11b,a=E.getView(),X=M.$20b||a.children[0],O=M.$19b,Y=a.$26b,r=a.children,g=N.target,Q=a.getBoundingClientRect(),F=V.getWindowInfo(),n=F.width,l=F.height,J=function(X){for(var q=0;q<r.length;q++){var K=r[q],_=new RegExp(X+"$"),h=K[b];if(h&&(_.test(h)||h.indexOf(X+" ")>=0))return K}},w=function(h){for(var p=0;p<Y.length;p++){var P=Y[p],L=new RegExp(h+"$"),x=P[b];if(x&&(L.test(x)||x.indexOf(h+" ")>=0))return P}},$=function(h){var $=w("menu-item"+h.$45b),q=$.getBoundingClientRect(),a=q.top-Q.top,e=q.left-Q.left;H(h,S,a+T),H(h,I,e+q.width+T);var R=h.getBoundingClientRect(),L=R.top,G=R.left,U=R.height,r=R.width,i=L+U+2,_=G+r+2;i>l&&H(h,S,a+l-i+T),_>n&&H(h,I,e-r+T)};if(K)U=N;else{if("mouseover"===N.type){for(var P=0;P<Y.length;P++){var q=Y[P];if(q.contains(g)){U=q;break}}if(!U&&O){var i=O.parentNode,y=J("submenu"+O.getAttribute("data-id"));(y&&y.contains(g)||i&&i.contains(g))&&(U=O)}}else if("mouseout"===N.type){for(var W=!1,G=N.relatedTarget,P=0;P<r.length;P++){var u=r[P];if("hidden"!==u.style.visibility&&u.contains(G)){W=!0;break}}if(W)return}!U&&X&&(U=w("menu-item"+(X.$45b||"NaN")))}if(U!=O){if(O)for(var k=O;k;){if(k[b]=k[b].replace(" menu-item-hover",""),k[b].indexOf("disabled")<0){var t=M.getItemByProperty("_id",k.getAttribute("data-id"));null!=t.background?t.background instanceof Function?H(k,"background-color",t.background.call(M,t)):H(k,"background-color",t.background):H(k,"background-color",V.contextMenuBackground),H(k,"color",V.contextMenuLabelColor)}var L=J("submenu"+k.getAttribute("data-id"));L&&H(L,D,"hidden");var f=k.parentNode;k=w("menu-item"+(f.$45b||"NaN"))}if(U){for(var h=U,j=[];h;){h[b]+=" menu-item-hover",h[b].indexOf("disabled")<0&&(H(h,"background-color",V.contextMenuHoverBackground),H(h,"color",V.contextMenuHoverLabelColor));var z=J("submenu"+h.getAttribute("data-id"));z&&(H(z,D,"visible"),j.push(z));var f=h.parentNode;h=w("menu-item"+(f.$45b||"NaN"))}j.reverse(),j.forEach(function(T){$(T)})}}M.$19b=U,M.$20b=U?U.parentNode:a.children[0]}},handle_mouseup:function(Z){this.handle_touchend(Z)},handleWindowTouchEnd:function(){var H=this;H.$28b!=R&&(w(H.$28b),delete H.$28b),H.$29b!=R&&(P(H.$29b),delete H.$29b),delete H.$34b,delete H.$30b,delete H.$35b},handleWindowMouseUp:function(c){this.handleWindowTouchEnd(c)},handle_mousemove:function(V){this.handle_touchmove(V)},handle_touchmove:function(D){if(!B()&&n(D)){for(var y=this,A=y.getView().children,p=R,U=0;U<A.length;U++){var Z=A[U];if(Z.contains(D.target)){p=Z;break}}var Y=y.$30b,N=s?{x:F(D).pageX,y:F(D).pageY}:{x:D.pageX,y:D.pageY};p&&Y&&e(Y,N)>2&&(u(y,D),y.$34b=p,y.$35b=p.$18b)}},handleWindowTouchMove:function(b){b.preventDefault();var U=this,_=U.$11b,p=U.$34b,D=U.$35b,v=U.$30b;if(v&&p){var a=s?{x:F(b).pageX,y:F(b).pageY}:{x:b.pageX,y:b.pageY},x=a.y-v.y;x>0?_.scrollUp(p,p.$18b-(D-x)):_.scrollDown(p,D-x-p.$18b)}},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},$10b:function(u,F){u.preventDefault();for(var s=this,c=s.getView().children,x=R,U=0;U<c.length;U++){var h=c[U];if(h.contains(u.target)){x=h;break}}if(x){var Q=this.$11b,g=Q.getRowHeight();Math.abs(F)>.05&&(F>0?Q.scrollUp(x,F*g):0>F&&Q.scrollDown(x,-F*g))}},handle_mousewheel:function(X){this.$10b(X,X.wheelDelta/40)},handle_DOMMouseScroll:function(H){this.$10b(H,-H.detail)},$44b:function(L){this.getView().contains(L.target)||this.$11b.hide()},$41b:function(C){this.$11b.show(C)},$4b:function($,w){var c=this.$11b;if(w=w||c._items,w&&w.length&&$.keyCode){var l=[$.keyCode];$.shiftKey&&l.push(16),$.ctrlKey&&l.push(17),$.altKey&&l.push(18),/mac/.test(C.navigator?C.navigator.userAgent.toLowerCase():"")?$.metaKey&&l.push(17):$.metaKey&&l.push(91),l.sort();var g=l.join(),F=c.$17b(w,function(U){if(U.key){var u=U.key.slice(0);return u.sort(),g===u.join()}});if(F){F.preventDefault!==!1&&$.preventDefault();var G=!1;F.disabled instanceof Function?G=F.disabled.call(c,F):F.disabled===!0&&(G=!0),G||c.$1b(F,$)}}},$39b:function(c){var w=this,K=F(c);w.$32b={x:K.pageX,y:K.pageY}},$38b:function(k){var V=this,v=F(k);V.$31b={x:v.pageX,y:v.pageY},V.$33b=a(function(){V.$31b&&(V.$32b?e(V.$31b,V.$32b)<10&&V.$11b.show(k):V.$11b.show(k)),delete V.$33b,delete V.$31b,delete V.$32b},600)},$40b:function(){var W=this;W.$33b!=R&&(w(W.$33b),delete W.$33b,delete W.$31b,delete W.$32b)}}),J.widget.ContextMenu=function(G){var Y=this,D=Y._view=h.createView(null,Y);D[b]="ht-widget-contextmenu",Y.setItems(G),Y.$13b=new z(Y),H(D,"font",V.contextMenuLabelFont),H(D,c,m),H(D,"cursor","default"),H(D,"-webkit-"+d,j),H(D,"-moz-"+d,j),H(D,"-ms-"+d,j),H(D,d,j),H(D,"box-sizing","border-box"),H(D,"-moz-box-sizing","border-box"),V.baseZIndex!=R&&H(D,"z-index",p(V.baseZIndex)+2+""),Y.$3b=function(L){Y.$13b.$4b(L)}},N("ContextMenu",U,{$5b:0,_items:R,$21b:R,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var I=this,P=I._enableGlobalKey;P===!1&&(W(o(),"keydown",I.$3b),I._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,g(o(),"keydown",this.$3b)},setItems:function(z){this._items=z},getItems:function(){return this._items},setVisibleFunc:function(s){this.$16b=s},setLabelMaxWidth:function(c){this.$43b=c},$1b:function(k,l){var W=this;if("check"===k.type)k.selected=!k.selected;else if("radio"===k.type){var L=k.groupId;W.$17b(W._items,function(A){A.groupId===L&&(A.selected=!1)}),k.selected=!0}if(W.hide(),k.action)k.action.apply(k.scope||W,[k,l]);else if(k.href){var q=k.linkTarget||"_self";C.open(k.href,q)}},getItemById:function(O){return this.getItemByProperty("id",O)},setItemVisible:function(v,e){var c=this.getItemById(v);c&&(c.visible=e)},getItemByProperty:function(L,p,Y){var S=this;if(Y=Y||S._items,!Y||0===Y.length)return R;var d=S.$17b(Y,function(d){return d[L]===p});return d||R},scrollUp:function(z,e){var L=this;if(e=e==R?20:e,e=p(e),0!==e){var Y=0;z.$18b>e&&(Y=z.$18b-e),L.$42b(z,Y),z.scrollTop=Y,z.$18b=Y}},scrollDown:function(E,z){var J=this;if(z=z==R?20:z,z=p(z),0!==z){var T=E.$22b,v=E.$23b,n=T-v;v+E.$18b+z<T&&(n=E.$18b+z),J.$42b(E,n),E.scrollTop=n,E.$18b=n}},$42b:function(L,h){h=h==R?L.$18b:h;var z=L.$24b,Z=L.$25b;z&&(H(z,"top",h+T),0==h?H(z,O,j):H(z,O,"block")),Z&&(H(Z,"bottom",-h+T),h==L.$22b-L.$23b?H(Z,O,j):H(Z,O,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function($,t){for(var k=0;k<$.length;k++){var u=$[k];if(t(u))return u;if(u.items){var w=this.$17b(u.items,t);if(w)return w}}},$2b:function(t,a){for(var k=this,S=0;S<t.length;S++){k.$5b++;var h=t[S];if(h.visible!==!1&&!(V.isFunction(h.visible)&&h.visible()===!1||k.$16b&&!k.$16b.call(k,h))){var I=L("li"),$=k.$5b+"";if(H(I,"white-space","nowrap"),H(I,O,"block"),"separator"===h||h.separator===!0){var _=M();_[b]="separator",H(_,Y,V.contextMenuSeparatorWidth+T),H(_,"background",V.contextMenuSeparatorColor),i(I,_)}else{h._id=$,I.setAttribute("data-id",$);var q=L("span"),e=L("span"),j=Q(),n=M();if(H(q,O,"inline-block"),H(q,Y,"1.2em"),H(e,O,"inline-block"),H(e,Y,"1.2em"),H(e,"line-height","1.2em"),j[b]="prefix",H(j,O,"inline-block"),H(j,K,"1em"),H(j,Y,"1em"),H(j,"vertical-align","middle"),H(j,l,"0 0.2em"),"check"===h.type&&h.selected?j[b]+=" check-prefix":"radio"===h.type&&h.selected&&(j[b]+=" radio-prefix"),i(I,j),h.icon){var f=Q();f[b]="contextmenu-item-icon",H(f,O,"inline-block"),H(f,Y,"1.2em"),H(f,K,"1.2em"),H(f,"margin-right","0.2em"),H(f,"float","left"),f.$50b=h.icon,f._item=h,i(q,f)}if(e[A]=h.label,i(q,e),i(I,q),n[b]="suffix",H(n,O,"inline-block"),H(n,"margin-left","1em"),H(n,"margin-right","0.4em"),H(n,"text-align","right"),H(n,"font-size","75%"),h.items&&(n[A]=V.contextMenuSubmenuMark),h.suffix&&(n[A]=h.suffix),i(I,n),I[b]="menu-item menu-item"+$,null!=h.background?h.background instanceof Function?H(I,"background-color",h.background.call(k,h)):H(I,"background-color",h.background):H(I,"background-color",V.contextMenuBackground),H(I,"color",V.contextMenuLabelColor),H(I,y,"3px 0"),h.disabled instanceof Function){var z=h.disabled.call(k,h);z&&(I[b]+=" disabled",H(I,"color",V.contextMenuDisabledLabelColor))}else h.disabled&&(I[b]+=" disabled",H(I,"color",V.contextMenuDisabledLabelColor));if(h.items){k.$21b||(k.$21b=new J.List);var E=L("ul");E[b]="submenu"+$,E.$45b=$,H(E,D,"hidden"),H(E,c,m),i(k._view,E),k.$21b.add(E),k.$2b(h.items,E)}}i(a,I)}}},rebuild:function(){var C=this,t=C._items,W=C._view;if(W&&(W[A]="",C.$21b=R,C.$5b=0,C.$19b=R,C.$20b=R,W.$26b=R,t&&0!==t.length)){var D=L("ul",C._r);i(W,D),C.$2b(t,D)}},addTo:function(F){if(F){var v=this,z=v.$13b;if(v.$12b=F,v.$9b=function(u){z.$44b(u)},v.$27b=function(J){z.$41b(J)},s){var G=v.$6b=function(i){z.$38b(i)},e=v.$7b=function(p){z.$39b(p)},R=v.$8b=function(S){z.$40b(S)};W(F,"touchstart",G,!0),W(F,"touchmove",e),W(F,"touchend",R)}else W(F,"contextmenu",v.$27b)}},showOnView:function(w,A,Y){w=w.getView?w.getView():w;var y=V.getWindowInfo(),j=w.getBoundingClientRect();this.show(j.left+y.left+A,j.top+y.top+Y)},show:function(U,G,w){var Y=this,w=w==R?!0:!1,_=Y._view;if(_){if(Y.invalidate(),1===arguments.length){var z=U;if(s){var Q=F(z);U=Q.pageX,G=Q.pageY}else U=z.pageX,G=z.pageY}var J=V.getWindowInfo(),g=J.width,t=J.height,B=J.left,x=J.top,p={pageX:U,pageY:G,clientX:U-B,clientY:G-x,target:1,originEvent:z},Z=p.clientX,q=p.clientY,$=function(w){w.style.height=t-6+T;var $=M(),e=M(),x=function(u){H(u,c,m),H(u,"text-align","center"),H(u,K,"100%"),H(u,"font-size",10+T),H(u,"padding","2px 0"),H(u,"border","0px solid "+V.contextMenuScrollerBorderColor),H(u,"background-color",V.contextMenuScrollerColor1),u.style.backgroundImage="-webkit-linear-gradient(top, "+V.contextMenuScrollerColor1+", "+V.contextMenuScrollerColor2+")",u.style.backgroundImage="linear-gradient(to bottom, "+V.contextMenuScrollerColor1+", "+V.contextMenuScrollerColor2+")"};$[b]="menu-arrow-item menu-arrow-item-top",e[b]="menu-arrow-item menu-arrow-item-bottom",x($),H($,"top",k),H($,"left",k),H($,"border-bottom-width",1+T),$[A]="▲",x(e),H(e,"bottom",k),H(e,"left",k),H(e,"border-top-width",1+T),e[A]="▼",w.$24b=$,w.$25b=e,w.$18b=w.scrollTop,w.$22b=w.scrollHeight,w.$23b=w.clientHeight,i(w,$),i(w,e),Y.$42b(w)};Y.beforeShow&&Y.beforeShow(p);var E=Y._items;if(E&&(z&&z.preventDefault(),E.length)){Y.rebuild(),V.appendToScreen(_),_.$26b=X(_,".menu-item");var L=_.children[0];L.offsetHeight>t&&$(L);var n=q+(w?1:0),d=Z+(w?1:0),N=function(C){for(var t=0,x=0,c=0,r=Y.$43b;c<C.children.length;c++){var E=C.children[c];if(E.getAttribute("data-id")){var f=E.children[1],g=E.children[2],a=f.children;if(r){var s=a[0];a.length>1&&(s=a[1]),s.offsetWidth>r&&(s[A]="<marquee scrollamount='3'>"+s[A]+"</marquee>",s.children[0].style.verticalAlign="text-bottom",H(s,K,r+T),H(s,O,"inline-block"))}var y=f.offsetWidth,F=g.offsetWidth;y>t&&(t=y),F>x&&(x=F)}}for(c=0;c<C.children.length;c++){var E=C.children[c];if(E.getAttribute("data-id")){var f=E.children[1],g=E.children[2],l=f.children[0],U=f.children[1];!U&&l.style.width&&H(l,K,t+T),H(f,K,t+T),H(g,K,x+T)}}};N(L);var y=q+3+_.offsetHeight,v=Z+3+_.offsetWidth;y>t?H(_,S,n-(y-t)+x+T):H(_,S,n+x+T),v>g?H(_,I,d-(v-g)+B+T):H(_,I,d+B+T);var u=Y.$21b;u&&u.each(function(H){N(H),H.offsetHeight>t&&$(H)}),Y.$9b&&W(o(),s?"touchstart":"mousedown",Y.$9b,!0),Y.afterShow&&Y.afterShow(p),Y.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=R:!1},getRelatedView:function(){return this.$12b},hide:function(){var E=this,t=E._view;t&&t.parentNode&&(r(t.parentNode,t),g(o(),s?"touchstart":"mousedown",E.$9b,!0),E.afterHide&&E.afterHide())},dispose:function(){var W=this,f=W.$12b,L=W._view;L&&(L.parentNode&&r(L.parentNode,L),W.disableGlobalKey(),f&&(s?(g(f,"touchstart",W.$6b,!0),g(f,"touchmove",W.$7b),g(f,"touchend",W.$8b)):g(f,"contextmenu",W.$27b)),W._view=W._items=W.$21b=W.$19b=W.$12b=W.beforeShow=W.afterShow=W.afterHide=W.$9b=W.$3b=W.$6b=W.$7b=W.$8b=W.$27b=R)},$46b:function(M,Z,K,u,_){var E=h.initContext(M);h.translateAndScale(E,0,0,1),E.clearRect(0,0,K,u),V.drawStretchImage(E,V.getImage(Z),"fill",0,0,K,u,_,this),E.restore()},$47b:function(){var V,J,C,H=this,g=H._view;if(H.isShowing()){var y=X(g,".check-prefix");for(C=0;C<y.length;C++){var t=y[C];V=t.clientWidth,J=t.clientHeight,t.$48b=V,t.$49b=J,h.setCanvas(t,V,J)}var I=X(g,".radio-prefix");for(C=0;C<I.length;C++){var $=I[C];V=$.clientWidth,J=$.clientHeight,$.$48b=V,$.$49b=J,h.setCanvas($,V,J)}var p=X(g,".contextmenu-item-icon");for(C=0;C<p.length;C++){var U=p[C];V=U.clientWidth,J=U.clientHeight,U.$48b=V,U.$49b=J,h.setCanvas(U,V,J)}}},validateImpl:function(){var z,H,b,k=this,P=k._view;if(k.isShowing()){var j=X(P,".check-prefix");for(b=0;b<j.length;b++){var G=j[b];z=G.$48b,H=G.$49b,z&&H&&k.$46b(G,V.contextMenuCheckIcon,z,H)}var x=X(P,".radio-prefix");for(b=0;b<x.length;b++){var c=x[b];z=c.$48b,H=c.$49b,z&&H&&k.$46b(c,V.contextMenuRadioIcon,z,H)}var t=X(P,".contextmenu-item-icon");for(b=0;b<t.length;b++){var J=t[b];z=J.$48b,H=J.$49b,z&&H&&k.$46b(J,V.getImage(J.$50b),z,H,J._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);