!function(w,J,y){"use strict";var q="ht",d=w[q],g=null,Q=Math,m=Q.PI,U=Q.cos,e=Q.sin,s=Q.abs,E=Q.max,_=Q.sqrt,c=1e-5,t=d.Default,f=t.def,G=t.startAnim,Y=t.createMatrix,K=t.transformVec,l=t.getInternal(),S=l.addMethod,I=l.superCall,k=l.toPointsArray,h=l.createNormals,L=l.toFloatArray,F=l.glMV,T=l.batchShape,v=l.createNodeMatrix,B=l.getFaceInfo,D=l.transformAppend,j=l.drawFaceInfo,V=l.createAnim,i=l.cube(),a=i.is,b=i.vs,O=i.uv,r=l.ui(),z=d.Node,X=d.Shape,P="h",A="v",p="front",x="back",C="left",R="right",u="top",o="bottom",M="dw.expanded",Z=".expanded",H="dw.angle",n=".angle",W=function(g,_,F){f(q+"."+g,_,F)},$=function(Y,q,Z){Z?Y.push(q.x,q.y):Y.push(q.x,q.y,q.z)},N=[1,0,0],hl=function(r,T,P,b){var _,p,V,z,M=0,B=[];if(b)for(_=b.length;_>M;M+=3)p=b[M],V=b[M+1],z=b[M+2],B.push(new Vr([new Il([T[3*p],T[3*p+1],T[3*p+2]],N,P?[P[2*p],P[2*p+1],0]:g),new Il([T[3*V],T[3*V+1],T[3*V+2]],N,P?[P[2*V],P[2*V+1],0]:g),new Il([T[3*z],T[3*z+1],T[3*z+2]],N,P?[P[2*z],P[2*z+1],0]:g)],r));else for(_=T.length;_>M;M+=3)p=M,V=M+1,z=M+2,B.push(new Vr([new Il([T[3*p],T[3*p+1],T[3*p+2]],N,P?[P[2*p],P[2*p+1],0]:g),new Il([T[3*V],T[3*V+1],T[3*V+2]],N,P?[P[2*V],P[2*V+1],0]:g),new Il([T[3*z],T[3*z+1],T[3*z+2]],N,P?[P[2*z],P[2*z+1],0]:g)],r));return B},le=[C,p,R,x,u,o],ep=le.concat("csg"),qj=[0,6,12,18,24,30],Iq=function(C,W,w){for(var o=v(C),S=[],M=0;6>M;M++)for(var y=le[M],V=qj[M],P=w?W.getFaceUv(C,y):g,k=w?W.getFaceUvScale(C,y):g,u=w?W.getFaceUvOffset(C,y):g,e=0;2>e;e++){var q,t,s,D=a[V+3*e],d=a[V+3*e+1],H=a[V+3*e+2];if(w){if(P){var _=8*M;q=[P[2*D-_],P[2*D+1-_],0],t=[P[2*d-_],P[2*d+1-_],0],s=[P[2*H-_],P[2*H+1-_],0]}else q=[O[2*D],O[2*D+1],0],t=[O[2*d],O[2*d+1],0],s=[O[2*H],O[2*H+1],0];k&&(q[0]*=k[0],q[1]*=k[1],t[0]*=k[0],t[1]*=k[1],s[0]*=k[0],s[1]*=k[1]),u&&(q[0]+=u[0],q[1]+=u[1],t[0]+=u[0],t[1]+=u[1],s[0]+=u[0],s[1]+=u[1])}S.push(new Vr([new Il(K([b[3*D],b[3*D+1],b[3*D+2]],o),N,q),new Il(K([b[3*d],b[3*d+1],b[3*d+2]],o),N,t),new Il(K([b[3*H],b[3*H+1],b[3*H+2]],o),N,s)],C))}return Bs.$15n(S)},Rj=function(G,I){var Z,Q=G.data.getAttaches();if(Q&&Q.each(function(v){v instanceof ci&&v.s("attach.operation")&&(Z||(Z=[]),Z.push(v))}),Z){var p;le.forEach(function(V){var o=hl(V,G[V].vs,G[V].tuv);p=p?p.concat(o):o}),p=Bs.$15n(p),Z.forEach(function(V){var m=V.s("attach.operation");p[m]&&(p=p[m](Iq(V,G.gv,G.csg.tuv)))}),le.forEach(function(M){M=G[M],M.vs=[],M.tuv&&(M.tuv=[])}),p.$19n().forEach(function(A){var D=A.$10n;if(D instanceof ci){if(D.s("attach.cull"))return;D="csg"}for(var C=G[D],S=C.vs,T=C.tuv,v=A.$9n,Q=2;Q<v.length;Q++)$(S,v[0].$24n),$(S,v[Q-1].$24n),$(S,v[Q].$24n),T&&($(T,v[0].uv,!0),$(T,v[Q-1].uv,!0),$(T,v[Q].uv,!0))})}ep.forEach(function(H){var $=G[H];$.visible&&$.vs.length?($.ns=h($.vs),L($,"vs"),L($,"tuv")):delete G[H]}),I&&(T(G,g,I),G.clear())};S(t,{createFrameModel:function(t,G,C,u){t=t==g?.07:t,G=G==g?t:G,C=C==g?t:C,u=u?u:{};var v=u.top,L=u.bottom,N=u.left,K=u.right,c=u.front,B=u.back,U=[],j=[];return c===!0?(U.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),j.push(0,0,0,1,1,1,1,1,1,0,0,0)):c===!1||(U.push(-.5,.5,.5,-.5,-.5,.5,-.5+t,-.5,.5,-.5+t,-.5,.5,-.5+t,.5,.5,-.5,.5,.5,.5-t,.5,.5,.5-t,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-t,.5,.5,-.5+t,.5,.5,-.5+t,.5-G,.5,.5-t,.5-G,.5,.5-t,.5-G,.5,.5-t,.5,.5,-.5+t,.5,.5,-.5+t,-.5+G,.5,-.5+t,-.5,.5,.5-t,-.5,.5,.5-t,-.5,.5,.5-t,-.5+G,.5,-.5+t,-.5+G,.5),j.push(0,0,0,1,t,1,t,1,t,0,0,0,1-t,0,1-t,1,1,1,1,1,1,0,1-t,0,t,0,t,G,1-t,G,1-t,G,1-t,0,t,0,t,1-G,t,1,1-t,1,1-t,1,1-t,1-G,t,1-G)),B===!0?(U.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),j.push(1,0,0,1,1,1,0,1,1,0,0,0)):B===!1||(U.push(-.5,.5,-.5,-.5+t,-.5,-.5,-.5,-.5,-.5,-.5+t,-.5,-.5,-.5,.5,-.5,-.5+t,.5,-.5,.5-t,.5,-.5,.5,-.5,-.5,.5-t,-.5,-.5,.5,-.5,-.5,.5-t,.5,-.5,.5,.5,-.5,-.5+t,.5,-.5,.5-t,.5-G,-.5,-.5+t,.5-G,-.5,.5-t,.5-G,-.5,-.5+t,.5,-.5,.5-t,.5,-.5,-.5+t,-.5+G,-.5,.5-t,-.5,-.5,-.5+t,-.5,-.5,.5-t,-.5,-.5,-.5+t,-.5+G,-.5,.5-t,-.5+G,-.5),j.push(1,0,1-t,1,1,1,1-t,1,1,0,1-t,0,t,0,0,1,t,1,0,1,t,0,0,0,1-t,0,t,G,1-t,G,t,G,1-t,0,t,0,1-t,1-G,t,1,1-t,1,t,1,1-t,1-G,t,1-G)),N===!0?(U.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),j.push(0,0,0,1,1,1,1,1,1,0,0,0)):N===!1||(U.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+C,-.5,-.5,-.5+C,-.5,.5,-.5+C,-.5,.5,-.5,-.5,.5,.5-C,-.5,-.5,.5-C,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-C,-.5,.5,-.5+C,-.5,.5-G,-.5+C,-.5,.5-G,.5-C,-.5,.5-G,.5-C,-.5,.5,.5-C,-.5,.5,-.5+C,-.5,-.5+G,-.5+C,-.5,-.5,-.5+C,-.5,-.5,.5-C,-.5,-.5,.5-C,-.5,-.5+G,.5-C,-.5,-.5+G,-.5+C),j.push(0,0,0,1,C,1,C,1,C,0,0,0,1-C,0,1-C,1,1,1,1,1,1,0,1-C,0,C,0,C,G,1-C,G,1-C,G,1-C,0,C,0,C,1-G,C,1,1-C,1,1-C,1,1-C,1-G,C,1-G)),K===!0?(U.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),j.push(1,0,0,1,1,1,0,1,1,0,0,0)):K===!1||(U.push(.5,.5,-.5,.5,-.5,-.5+C,.5,-.5,-.5,.5,-.5,-.5+C,.5,.5,-.5,.5,.5,-.5+C,.5,.5,.5-C,.5,-.5,.5,.5,-.5,.5-C,.5,-.5,.5,.5,.5,.5-C,.5,.5,.5,.5,.5,-.5+C,.5,.5-G,.5-C,.5,.5-G,-.5+C,.5,.5-G,.5-C,.5,.5,-.5+C,.5,.5,.5-C,.5,-.5+G,-.5+C,.5,-.5,.5-C,.5,-.5,-.5+C,.5,-.5,.5-C,.5,-.5+G,-.5+C,.5,-.5+G,.5-C),j.push(1,0,1-C,1,1,1,1-C,1,1,0,1-C,0,C,0,0,1,C,1,0,1,C,0,0,0,1-C,0,C,G,1-C,G,C,G,1-C,0,C,0,1-C,1-G,C,1,1-C,1,C,1,1-C,1-G,C,1-G)),v===!0?(U.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),j.push(1,1,1,0,0,0,0,0,0,1,1,1)):v===!1||(U.push(.5,.5,.5,.5,.5,-.5,.5-t,.5,-.5,.5-t,.5,-.5,.5-t,.5,.5,.5,.5,.5,-.5+t,.5,.5,-.5+t,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+t,.5,.5,.5-t,.5,.5,.5-t,.5,.5-C,-.5+t,.5,.5-C,-.5+t,.5,.5-C,-.5+t,.5,.5,.5-t,.5,.5,.5-t,.5,-.5+C,.5-t,.5,-.5,-.5+t,.5,-.5,-.5+t,.5,-.5,-.5+t,.5,-.5+C,.5-t,.5,-.5+C),j.push(1,1,1,0,1-t,0,1-t,0,1-t,1,1,1,t,1,t,0,0,0,0,0,0,1,t,1,1-t,1,1-t,1-C,t,1-C,t,1-C,t,1,1-t,1,1-t,C,1-t,0,t,0,t,0,t,C,1-t,C)),L===!0?(U.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),j.push(1,0,0,1,1,1,0,1,1,0,0,0)):L===!1||(U.push(.5,-.5,.5,.5-t,-.5,-.5,.5,-.5,-.5,.5-t,-.5,-.5,.5,-.5,.5,.5-t,-.5,.5,-.5+t,-.5,.5,-.5,-.5,-.5,-.5+t,-.5,-.5,-.5,-.5,-.5,-.5+t,-.5,.5,-.5,-.5,.5,.5-t,-.5,.5,-.5+t,-.5,.5-C,.5-t,-.5,.5-C,-.5+t,-.5,.5-C,.5-t,-.5,.5,-.5+t,-.5,.5,.5-t,-.5,-.5+C,-.5+t,-.5,-.5,.5-t,-.5,-.5,-.5+t,-.5,-.5,.5-t,-.5,-.5+C,-.5+t,-.5,-.5+C),j.push(1,0,1-t,1,1,1,1-t,1,1,0,1-t,0,t,0,0,1,t,1,0,1,t,0,0,0,1-t,0,t,C,1-t,C,t,C,1-t,0,t,0,1-t,1-C,t,1,1-t,1,t,1,1-t,1-C,t,1-C)),{vs:U,uv:j}}}),S(d.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":y,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":m/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),le.forEach(function(y){var Q={};Q[y+Z]=!1,Q[y+".toggleable"]=!1,Q[y+".axis"]=C,Q[y+".start"]=0,Q[y+".end"]=m/2,Q[y+n]=0,S(d.Style,Q,!0)});var Bs=function(){this.$4n=[]};Bs.$15n=function(Q){var P=new Bs;return P.$4n=Q,P},Bs.prototype={clone:function(){var M=new Bs;return M.$4n=this.$4n.map(function(y){return y.clone()}),M},$19n:function(){return this.$4n},union:function(v){var k=new Wr(this.clone().$4n),Q=new Wr(v.clone().$4n);return k.$3n(Q),Q.$3n(k),Q.$6n(),Q.$3n(k),Q.$6n(),k.$7n(Q.$2n()),Bs.$15n(k.$2n())},subtract:function(E){var x=new Wr(this.clone().$4n),U=new Wr(E.clone().$4n);return x.$6n(),x.$3n(U),U.$3n(x),U.$6n(),U.$3n(x),U.$6n(),x.$7n(U.$2n()),x.$6n(),Bs.$15n(x.$2n())},intersect:function(z){var R=new Wr(this.clone().$4n),W=new Wr(z.clone().$4n);return R.$6n(),W.$3n(R),W.$6n(),R.$3n(W),W.$3n(R),R.$7n(W.$2n()),R.$6n(),Bs.$15n(R.$2n())},inverse:function(){var G=this.clone();return G.$4n.map(function(N){N.flip()}),G}},Bs.cube=function(p){p=p||{};var L=new nb(p.center||[0,0,0]),e=p.radius?p.radius.length?p.radius:[p.radius,p.radius,p.radius]:[1,1,1];return Bs.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(O){return new Vr(O[0].map(function(A){var p=new nb(L.x+e[0]*(2*!!(1&A)-1),L.y+e[1]*(2*!!(2&A)-1),L.z+e[2]*(2*!!(4&A)-1));return new Il(p,new nb(O[1]))}))}))},Bs.sphere=function(d){function n(D,A){D*=2*m,A*=m;var K=new nb(U(D)*e(A),U(A),e(D)*e(A));w.push(new Il(G.$20n(K.$21n(B)),K))}d=d||{};for(var w,G=new nb(d.center||[0,0,0]),B=d.radius||1,F=d.slices||16,f=d.stacks||8,$=[],l=0;F>l;l++)for(var X=0;f>X;X++)w=[],n(l/F,X/f),X>0&&n((l+1)/F,X/f),f-1>X&&n((l+1)/F,(X+1)/f),n(l/F,(X+1)/f),$.push(new Vr(w));return Bs.$15n($)},Bs.cylinder=function(A){function I(N,o,R){var t=2*o*m,a=q.$21n(U(t)).$20n(Z.$21n(e(t))),h=$.$20n(l.$21n(N)).$20n(a.$21n(X)),Y=a.$21n(1-s(R)).$20n(u.$21n(R));return new Il(h,Y)}A=A||{};for(var $=new nb(A.start||[0,-1,0]),j=new nb(A.end||[0,1,0]),l=j.$13n($),X=A.radius||1,x=A.slices||16,u=l.$14n(),F=s(u.y)>.5,q=new nb(F,!F,0).$12n(u).$14n(),Z=q.$12n(u).$14n(),k=new Il($,u.$11n()),o=new Il(j,u.$14n()),J=[],R=0;x>R;R++){var v=R/x,T=(R+1)/x;J.push(new Vr([k,I(0,v,-1),I(0,T,-1)])),J.push(new Vr([I(0,T,0),I(0,v,0),I(1,v,0),I(1,T,0)])),J.push(new Vr([o,I(1,T,1),I(1,v,1)]))}return Bs.$15n(J)};var nb=function(k,F,p){var S=this;3==arguments.length?(S.x=k,S.y=F,S.z=p):"x"in k?(S.x=k.x,S.y=k.y,S.z=k.z):(S.x=k[0],S.y=k[1],S.z=k[2])};nb.prototype={clone:function(){return new nb(this.x,this.y,this.z)},$11n:function(){return new nb(-this.x,-this.y,-this.z)},$20n:function(g){return new nb(this.x+g.x,this.y+g.y,this.z+g.z)},$13n:function(G){return new nb(this.x-G.x,this.y-G.y,this.z-G.z)},$21n:function(v){return new nb(this.x*v,this.y*v,this.z*v)},$16n:function(W){return new nb(this.x/W,this.y/W,this.z/W)},$23n:function(k){return this.x*k.x+this.y*k.y+this.z*k.z},lerp:function(i,S){return this.$20n(i.$13n(this).$21n(S))},length:function(){return _(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(D){var M=this;return new nb(M.y*D.z-M.z*D.y,M.z*D.x-M.x*D.z,M.x*D.y-M.y*D.x)}};var Il=function(L,H,R){var u=this;u.$24n=new nb(L),u.$22n=new nb(H),u.uv=R?new nb(R):null};Il.prototype={clone:function(){var D=this;return new Il(D.$24n.clone(),D.$22n.clone(),D.uv?D.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(u,r){var _=this;return new Il(_.$24n.lerp(u.$24n,r),_.$22n.lerp(u.$22n,r),_.uv?_.uv.lerp(u.uv,r):null)}};var Eb=function(F,Q){this.$22n=F,this.w=Q};Eb.$17n=function(v,V,L){var C=V.$13n(v).$12n(L.$13n(v)).$14n();return new Eb(C,C.$23n(v))},Eb.prototype={clone:function(){return new Eb(this.$22n.clone(),this.w)},flip:function(){var y=this;y.$22n=y.$22n.$11n(),y.w=-y.w},$5n:function(n,q,s,C,H){for(var W=this,Q=0,i=1,x=2,P=3,B=0,O=[],M=0;M<n.$9n.length;M++){var I=W.$22n.$23n(n.$9n[M].$24n)-W.w,k=-c>I?x:I>c?i:Q;B|=k,O.push(k)}switch(B){case Q:(W.$22n.$23n(n.$8n.$22n)>0?q:s).push(n);break;case i:C.push(n);break;case x:H.push(n);break;case P:for(var G=[],u=[],M=0;M<n.$9n.length;M++){var F=(M+1)%n.$9n.length,T=O[M],w=O[F],p=n.$9n[M],Z=n.$9n[F];if(T!=x&&G.push(p),T!=i&&u.push(T!=x?p.clone():p),(T|w)==P){var I=(W.w-this.$22n.$23n(p.$24n))/W.$22n.$23n(Z.$24n.$13n(p.$24n)),m=p.$18n(Z,I);G.push(m),u.push(m.clone())}}G.length>=3&&C.push(new Vr(G,n.$10n)),u.length>=3&&H.push(new Vr(u,n.$10n))}}};var Vr=function(h,Q){var R=this;R.$9n=h,R.$10n=Q,R.$8n=Eb.$17n(h[0].$24n,h[1].$24n,h[2].$24n)};Vr.prototype={clone:function(){var Y=this.$9n.map(function(e){return e.clone()});return new Vr(Y,this.$10n)},flip:function(){this.$9n.reverse().map(function(J){J.flip()}),this.$8n.flip()}};var Wr=function(o){var q=this;q.$8n=null,q.front=null,q.back=null,q.$4n=[],o&&q.$7n(o)};Wr.prototype={clone:function(){var H=this,M=new Wr;return M.$8n=H.$8n&&H.$8n.clone(),M.front=H.front&&H.front.clone(),M.back=H.back&&H.back.clone(),M.$4n=H.$4n.map(function(z){return z.clone()}),M},$6n:function(){for(var t=this,B=0;B<t.$4n.length;B++)t.$4n[B].flip();t.$8n.flip(),t.front&&t.front.$6n(),t.back&&t.back.$6n();var x=t.front;t.front=t.back,t.back=x},$1n:function(t){var G=this;if(!G.$8n)return t.slice();for(var U=[],X=[],h=0;h<t.length;h++)G.$8n.$5n(t[h],U,X,U,X);return G.front&&(U=G.front.$1n(U)),X=G.back?G.back.$1n(X):[],U.concat(X)},$3n:function($){var S=this;S.$4n=$.$1n(S.$4n),S.front&&S.front.$3n($),S.back&&S.back.$3n($)},$2n:function(){var j=this,U=j.$4n.slice();return j.front&&(U=U.concat(j.front.$2n())),j.back&&(U=U.concat(j.back.$2n())),U},$7n:function(p){var U=this;if(p.length){U.$8n||(U.$8n=p[0].$8n.clone());for(var l=[],_=[],L=0;L<p.length;L++)this.$8n.$5n(p[L],U.$4n,U.$4n,l,_);l.length&&(U.front||(U.front=new Wr),this.front.$7n(l)),_.length&&(U.back||(U.back=new Wr),U.back.$7n(_))}}};var Gd="symbol",Hk=d.Symbol=function(H,O,d){var N=this;I(Hk,N),N.s3(20,20,20),N.s({"all.visible":!1,shape:"rect"}),N.setIcon(H,O,d)};W("Symbol",z,{setIcon:function(K,M,N){var g,S=this;return Hk.superClass.setIcon.call(S,K),K?(g={for3d:!0,face:"center",position:44,names:[K]},N&&(g.transaprent=!0),M&&(g.autorotate=M),S.addStyleIcon(Gd,g)):S.removeStyleIcon(Gd),S.setWidth(l.getImageWidth(t.getImage(K),S)||20),g}});var ci=d.CSGNode=function(){I(ci,this),this.s({shape:"rect","attach.thickness":1.001})},Or={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};W("CSGNode",z,{_22Q:function(){return cp},onPropertyChanged:function(V){var I=this,Z=I.getHost();ci.superClass.onPropertyChanged.call(I,V),Or[V.property]&&(Z instanceof Km||Z instanceof ci)&&Z.fp("csgNodeChange",!0,!1)}});var cp=function(H,R){I(cp,this,[H,R])};f(cp,r.Node3dUI,{_80o:function(A,e,l){var C=this;C._shape3d?cp.superClass._80o.call(C,A,e,l):(F(C.gv),ep.forEach(function(H){j(C,A,e,H,l)}))},validate:function(L,V){var F=this,G=F.gv,T=F.data;if(T.s("shape3d"))return cp.superClass.validate.call(F,L,V),F._shape3d=!0,void 0;F._shape3d=!1;var C=v(T,G.getMat(T)),W=L&&L.uv;F.vf2("csg",W);for(var Z=0;6>Z;Z++)for(var d=le[Z],j=qj[Z],r=F.vf2(d,W,V),x=r.mat||C,n=r.vs,X=r.uv,l=r.tuv,p=0;2>p;p++){var z=a[j+3*p],E=a[j+3*p+1],h=a[j+3*p+2];if(D(n,x,[b[3*z],b[3*z+1],b[3*z+2]]),D(n,x,[b[3*E],b[3*E+1],b[3*E+2]]),D(n,x,[b[3*h],b[3*h+1],b[3*h+2]]),l)if(X){var P=8*Z;l.push(X[2*z-P],X[2*z+1-P],X[2*E-P],X[2*E+1-P],X[2*h-P],X[2*h+1-P])}else l.push(O[2*z],O[2*z+1],O[2*E],O[2*E+1],O[2*h],O[2*h+1])}Rj(F,L,V)},vf2:function(R,O,c){var l,K=this,u=K.gv.getFaceVisible(K.data,R);return l=B(K,R,c),l.vs=[],l.tuv=u&&(l.texture||O)?[]:g,l.visible=u,l}});var Km=d.CSGShape=function(){var d=this;I(Km,d),d.s({"shape.background":g,"shape.border.width":8}),d.setTall(240),d.setElevation(120),d.setThickness(14)};W("CSGShape",X,{IRotatable:!1,_22Q:function(){return Ad},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var Ad=function(E,G){I(Ad,this,[E,G])};f(Ad,r.Shape3dUI,{_80o:function(e,U,$){var X=this;X.undrawable||(F(X.gv),ep.forEach(function(g){j(X,e,U,g,$)}))},validate:function(w,P){var q=this,Z=q.data,n=Z.getPoints();if(q.undrawable=n.size()<2)return q.clear(),void 0;var R=Z.isClosePath(),U=E(Z._thickness/2,c),l=k(n,g,g,R);ep.forEach(function(V){q.vf(V,w&&w.uv,!0,P)}),R&&(q.left.visible=!1,q.right.visible=!1),q._12O(l,U),q._20Q(l),Rj(q,w,P)}});var Vd=d.DoorWindow=function(){var P=this;I(Vd,P),P.setElevation(100),P.s3(100,200,14)};W("DoorWindow",ci,{IDoorWindow:!0,toggle:function(d){this.setExpanded(!this.s(M),d)},isExpanded:function(){return this.s(M)},setExpanded:function(k,O){var g=this,R=g.$25n,U=g.getDataModel(),S=g.s(M);if(R&&(R.stop(!0),delete g.$25n),S!==k){U&&U.beginTransaction();var W=k?g.s("dw.end"):g.s("dw.start");g.s(M,k),O=V(O),O?(S=g.s(H),O.action=function(Z){g.s(H,S+(W-S)*Z)},O.finishFunc=function(){U&&U.endTransaction()},g.$25n=G(O)):(g.s(H,W),U&&U.endTransaction())}},getMat:function(){var f=this,e=f.s("dw.s3"),X=f.s("dw.t3"),a=f.s("dw.flip"),O=f.s(H);if(e||O||X||a){var v=[];if(a&&v.push({r3:[0,m,0]}),e&&v.push({s3:e}),O){e=f.getFinalScale3d();var s=f.s("dw.axis"),h=e[0]/2,p=e[1]/2;e[2]/2,s===C?v.push({t3:[h,0,0]},{r3:[0,-O,0]},{t3:[-h,0,0]}):s===R?v.push({t3:[-h,0,0]},{r3:[0,O,0]},{t3:[h,0,0]}):s===u?v.push({t3:[0,-p,0]},{r3:[-O,0,0]},{t3:[0,p,0]}):s===o?v.push({t3:[0,p,0]},{r3:[O,0,0]},{t3:[0,-p,0]}):s===A?v.push({r3:[0,O,0]}):s===P&&v.push({r3:[O,0,0]})}return X&&v.push({t3:X}),Y(v)}return g}});var Mj=d.CSGBox=function(){var O=this;I(Mj,O),O.setElevation(100),O.s3(100,200,100)};W("CSGBox",ci,{ICSGBox:!0,toggleFace:function(H,X){this.setFaceExpanded(H,!this.s(H+Z),X)},isFaceExpanded:function(U){return this.s(U+Z)},setFaceExpanded:function(R,s,r){var m=this,T=m.$25n,Y=m.s(R+Z);if(T&&(T.stop(!0),delete m.$25n),Y!==s){var k=s?m.s(R+".end"):m.s(R+".start");m.s(R+Z,s),r=V(r),r?(Y=m.s(R+n),r.action=function(I){m.s(R+n,Y+(k-Y)*I)},m.$25n=G(r)):m.s(R+n,k)}},getFaceMat:function(w){var D=this,v=D.s(w+n);if(!v)return g;var Q=D.s(w+".axis"),h=D.s3(),U=h[0]/2,K=h[1]/2,e=h[2]/2,c=[];return w===p&&(Q===C?c.push({t3:[U,0,-e]},{r3:[0,-v,0]},{t3:[-U,0,e]}):Q===R?c.push({t3:[-U,0,-e]},{r3:[0,v,0]},{t3:[U,0,e]}):Q===u?c.push({t3:[0,-K,-e]},{r3:[-v,0,0]},{t3:[0,K,e]}):Q===o?c.push({t3:[0,K,-e]},{r3:[v,0,0]},{t3:[0,-K,e]}):Q===A?c.push({t3:[0,0,-e]},{r3:[0,v,0]},{t3:[0,0,e]}):Q===P&&c.push({t3:[0,0,-e]},{r3:[v,0,0]},{t3:[0,0,e]})),w===x&&(Q===C?c.push({t3:[-U,0,e]},{r3:[0,-v,0]},{t3:[U,0,-e]}):Q===R?c.push({t3:[U,0,e]},{r3:[0,v,0]},{t3:[-U,0,-e]}):Q===u?c.push({t3:[0,-K,e]},{r3:[v,0,0]},{t3:[0,K,-e]}):Q===o?c.push({t3:[0,K,e]},{r3:[-v,0,0]},{t3:[0,-K,-e]}):Q===A?c.push({t3:[0,0,e]},{r3:[0,v,0]},{t3:[0,0,-e]}):Q===P&&c.push({t3:[0,0,e]},{r3:[v,0,0]},{t3:[0,0,-e]})),w===C&&(Q===C?c.push({t3:[U,0,e]},{r3:[0,-v,0]},{t3:[-U,0,-e]}):Q===R?c.push({t3:[U,0,-e]},{r3:[0,v,0]},{t3:[-U,0,e]}):Q===u?c.push({t3:[U,-K,0]},{r3:[0,0,-v]},{t3:[-U,K,0]}):Q===o?c.push({t3:[U,K,0]},{r3:[0,0,v]},{t3:[-U,-K,0]}):Q===A?c.push({t3:[U,0,0]},{r3:[0,v,0]},{t3:[-U,0,0]}):Q===P&&c.push({t3:[U,0,0]},{r3:[0,0,v]},{t3:[-U,0,0]})),w===R&&(Q===C?c.push({t3:[-U,0,-e]},{r3:[0,-v,0]},{t3:[U,0,e]}):Q===R?c.push({t3:[-U,0,e]},{r3:[0,v,0]},{t3:[U,0,-e]}):Q===u?c.push({t3:[-U,-K,0]},{r3:[0,0,v]},{t3:[U,K,0]}):Q===o?c.push({t3:[-U,K,0]},{r3:[0,0,-v]},{t3:[U,-K,0]}):Q===A?c.push({t3:[-U,0,0]},{r3:[0,v,0]},{t3:[U,0,0]}):Q===P&&c.push({t3:[-U,0,0]},{r3:[0,0,v]},{t3:[U,0,0]})),w===u&&(Q===C?c.push({t3:[U,-K,0]},{r3:[0,0,v]},{t3:[-U,K,0]}):Q===R?c.push({t3:[-U,-K,0]},{r3:[0,0,-v]},{t3:[U,K,0]}):Q===u?c.push({t3:[0,-K,e]},{r3:[-v,0,0]},{t3:[0,K,-e]}):Q===o?c.push({t3:[0,-K,-e]},{r3:[v,0,0]},{t3:[0,K,e]}):Q===A?c.push({t3:[0,-K,0]},{r3:[0,0,v]},{t3:[0,K,0]}):Q===P&&c.push({t3:[0,-K,0]},{r3:[v,0,0]},{t3:[0,K,0]})),w===o&&(Q===C?c.push({t3:[U,K,0]},{r3:[0,0,-v]},{t3:[-U,-K,0]}):Q===R?c.push({t3:[-U,K,0]},{r3:[0,0,v]},{t3:[U,-K,0]}):Q===u?c.push({t3:[0,K,-e]},{r3:[-v,0,0]},{t3:[0,-K,e]}):Q===o?c.push({t3:[0,K,e]},{r3:[v,0,0]},{t3:[0,-K,-e]}):Q===A?c.push({t3:[0,K,0]},{r3:[0,0,v]},{t3:[0,-K,0]}):Q===P&&c.push({t3:[0,K,0]},{r3:[v,0,0]},{t3:[0,-K,0]})),Y(c)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);