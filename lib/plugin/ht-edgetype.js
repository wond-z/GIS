!function(K){"use strict";var n="ht",Y=K[n],B=Math,s=B.max,q=B.min,z=B.abs,g=B.atan2,R=(B.cos,B.sin,B.ceil),u=Y.Default,m=u.getInternal(),P=Y.List,b=m.Mat,x=m.getNodeRect,N=m.intersectionLineRect,F=u.getDistance,p=u.setEdgeType,O="left",L="right",T="top",G="bottom",X="edge.type",e="edge.gap",w="edge.center",D="edge.extend",o=function(f,R){return x(f,R).width},E=function(U,W){return x(U,W).height},a=function(n,l){return m.getEdgeHostPosition(n,l,"source")},Z=function(M,S){return m.getEdgeHostPosition(M,S,"target")},l=function(J,b){var T=J.s(X),H=J.getEdgeGroup();if(H){var p=0;if(H.eachSiblingEdge(function(n){b.isVisible(n)&&n.s(X)==T&&p++}),p>1)return J.s(e)*(p-1)/2}return 0},t=function(r,Q){var C=r.s(X),U=r.isLooped();if(!r.getEdgeGroup())return U?r.s(e):0;var w,V=0,A=0,L=0;return r.getEdgeGroup().getSiblings().each(function(J){J.each(function(P){if(P._40I===r._40I&&P.s(X)==C&&Q.isVisible(P)){var S=P.s(e);w?(A+=L/2+S/2,L=S):(w=P,L=S),P===r&&(V=A)}})}),U?A-V+L:V-A/2},d=function(t,q){var o=q.s("edge.corner.radius");return u.toRoundedCorner(t,o)};m.addMethod(Y.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),p("boundary",function(O,U,J,T){T||(U=-U);var m,i=a(J,O),S=Z(J,O),C=x(J,O._40I),k=x(J,O._41I),z=new b(g(S.y-i.y,S.x-i.x)),e=F(i,S),L=i.x,B=i.y;return m=z.tf(0,U),i={x:m.x+L,y:m.y+B},m=z.tf(e,U),S={x:m.x+L,y:m.y+B},m=N(i,S,C),m&&(i={x:m[0],y:m[1]}),m=N(i,S,k),m&&(S={x:m[0],y:m[1]}),{points:new P([i,S])}}),p("ripple",function(W,u,o,v){v||(u=-u);var O=a(o,W),B=Z(o,W),L=F(O,B),c=q(W.s("edge.offset"),L/2),_=W.s("edge.ripple.size"),l=W.s("edge.ripple.length"),U=W.s("edge.ripple.both"),d=W.s(w),h=W.s("edge.ripple.elevation"),C=new P,t=W.s("edge.ripple.straight")?null:new P,X=new b(g(B.y-O.y,B.x-O.x));v||(h=-h),L-=2*c,l>0&&(_=R(L/l));var K=L/_;t&&t.add(1);for(var i=0;_>i;i++)t&&t.add(3),0===i?C.add({x:c+K*i,y:d?0:u}):C.add({x:c+K*i,y:u}),C.add({x:c+K*i+K/2,y:h+u}),U&&(h=-h);for(C.add({x:c+L,y:d?0:u}),i=0;i<C.size();i++){var e=X.tf(C.get(i));e.x+=O.x,e.y+=O.y,C.set(i,e)}return{points:C,segments:t}}),p("h.v",function(y,V,I){V=t(y,I);var O=new P,r=y.s(w),J=a(I,y),s=J.x,X=J.y,b=Z(I,y),k=b.x,F=b.y,D=y._40I instanceof Y.Edge,U=y._41I instanceof Y.Edge,x=0,G=0,q=k-s,M=F-X;return r||(x=D?0:o(I,y._40I)/2,G=U?0:E(I,y._41I)/2),q>=0&&0>=M?(O.add({x:s+x,y:X+V}),O.add({x:k+V,y:X+V}),O.add({x:k+V,y:F+G})):0>=q&&M>=0?(O.add({x:s-x,y:X+V}),O.add({x:k+V,y:X+V}),O.add({x:k+V,y:F-G})):q>=0&&M>=0?(O.add({x:s+x,y:X+V}),O.add({x:k-V,y:X+V}),O.add({x:k-V,y:F-G})):(O.add({x:s-x,y:X+V}),O.add({x:k-V,y:X+V}),O.add({x:k-V,y:F+G})),d(O,y)}),p("v.h",function(L,H,C){H=t(L,C);var W=new P,F=L.s(w),O=a(C,L),T=O.x,p=O.y,M=Z(C,L),K=M.x,s=M.y,V=L._40I instanceof Y.Edge,h=L._41I instanceof Y.Edge,Q=0,J=0,c=K-T,f=s-p;return F||(Q=h?0:o(C,L._41I)/2,J=V?0:E(C,L._40I)/2),c>=0&&0>=f?(W.add({x:T+H,y:p-J}),W.add({x:T+H,y:s+H}),W.add({x:K-Q,y:s+H})):0>=c&&f>=0?(W.add({x:T+H,y:p+J}),W.add({x:T+H,y:s+H}),W.add({x:K+Q,y:s+H})):c>=0&&f>=0?(W.add({x:T-H,y:p+J}),W.add({x:T-H,y:s+H}),W.add({x:K-Q,y:s+H})):(W.add({x:T-H,y:p-J}),W.add({x:T-H,y:s+H}),W.add({x:K+Q,y:s+H})),d(W,L)}),p("ortho",function(c,t,e){var T=new P,u=c.s(w),J=c.s("edge.ortho"),g=c._40I,F=c._41I,h=a(e,c),H=h.x,$=h.y,S=Z(e,c),D=S.x,R=S.y,x=D-H,G=R-$,X=g instanceof Y.Edge,p=F instanceof Y.Edge,j=u||X?0:o(e,g)/2,O=u||X?0:E(e,g)/2,y=u||p?0:o(e,F)/2,f=u||p?0:E(e,F)/2,I=(x-(j+y)*(x>0?1:-1))*J,W=(G-(O+f)*(G>0?1:-1))*J;return z(x)<z(G)?x>=0&&0>=G?(T.add({x:H+t,y:$-O}),T.add({x:H+t,y:$+W+t-O}),T.add({x:D+t,y:$+W+t-O}),T.add({x:D+t,y:R+f})):0>=x&&G>=0?(T.add({x:H+t,y:$+O}),T.add({x:H+t,y:$+W+t+O}),T.add({x:D+t,y:$+W+t+O}),T.add({x:D+t,y:R-f})):x>=0&&G>=0?(T.add({x:H+t,y:$+O}),T.add({x:H+t,y:$+W-t+O}),T.add({x:D+t,y:$+W-t+O}),T.add({x:D+t,y:R-f})):(T.add({x:H+t,y:$-O}),T.add({x:H+t,y:$+W-t-O}),T.add({x:D+t,y:$+W-t-O}),T.add({x:D+t,y:R+f})):x>=0&&0>=G?(T.add({x:H+j,y:$+t}),T.add({x:H+I+t+j,y:$+t}),T.add({x:H+I+t+j,y:R+t}),T.add({x:D-y,y:R+t})):0>=x&&G>=0?(T.add({x:H-j,y:$+t}),T.add({x:H+I+t-j,y:$+t}),T.add({x:H+I+t-j,y:R+t}),T.add({x:D+y,y:R+t})):x>=0&&G>=0?(T.add({x:H+j,y:$+t}),T.add({x:H+I-t+j,y:$+t}),T.add({x:H+I-t+j,y:R+t}),T.add({x:D-y,y:R+t})):(T.add({x:H-j,y:$+t}),T.add({x:H+I-t-j,y:$+t}),T.add({x:H+I-t-j,y:R+t}),T.add({x:D+y,y:R+t})),d(T,c)}),p("flex",function(A,D,T){var e=new P,v=A.s("edge.flex")+l(A,T),G=A.s(w),x=A._40I,p=A._41I,s=a(T,A),C=s.x,N=s.y,c=Z(T,A),m=c.x,y=c.y,Q=x instanceof Y.Edge,B=p instanceof Y.Edge,M=m-C,S=y-N,F=G||Q?0:o(T,x)/2,$=G||Q?0:E(T,x)/2,J=G||B?0:o(T,p)/2,u=G||B?0:E(T,p)/2,X=M>0?v:-v,k=S>0?v:-v;return z(M)<z(S)?M>=0&&0>=S?(e.add({x:C+D,y:N-$}),e.add({x:C+D,y:N+k+D-$}),e.add({x:m+D,y:y-k+D+u}),e.add({x:m+D,y:y+u})):0>=M&&S>=0?(e.add({x:C+D,y:N+$}),e.add({x:C+D,y:N+k+D+$}),e.add({x:m+D,y:y-k+D-u}),e.add({x:m+D,y:y-u})):M>=0&&S>=0?(e.add({x:C+D,y:N+$}),e.add({x:C+D,y:N+k-D+$}),e.add({x:m+D,y:y-k-D-u}),e.add({x:m+D,y:y-u})):(e.add({x:C+D,y:N-$}),e.add({x:C+D,y:N+k-D-$}),e.add({x:m+D,y:y-k-D+u}),e.add({x:m+D,y:y+u})):M>=0&&0>=S?(e.add({x:C+F,y:N+D}),e.add({x:C+X+D+F,y:N+D}),e.add({x:m-X+D-J,y:y+D}),e.add({x:m-J,y:y+D})):0>=M&&S>=0?(e.add({x:C-F,y:N+D}),e.add({x:C+X+D-F,y:N+D}),e.add({x:m-X+D+J,y:y+D}),e.add({x:m+J,y:y+D})):M>=0&&S>=0?(e.add({x:C+F,y:N+D}),e.add({x:C+X-D+F,y:N+D}),e.add({x:m-X-D-J,y:y+D}),e.add({x:m-J,y:y+D})):(e.add({x:C-F,y:N+D}),e.add({x:C+X-D-F,y:N+D}),e.add({x:m-X-D+J,y:y+D}),e.add({x:m+J,y:y+D})),d(e,A)}),p("extend.east",function(W,g,x){var H=new P,I=W.s(D)+l(W,x),N=W.s(w),j=a(x,W),F=W._40I instanceof Y.Edge,h=W._41I instanceof Y.Edge,E=j.x+(N||F?0:o(x,W._40I)/2),J=j.y,Q=Z(x,W),f=Q.x+(N||h?0:o(x,W._41I)/2),m=Q.y,r=s(E,f)+I;return J>m?(H.add({x:E,y:J+g}),H.add({x:r+g,y:J+g}),H.add({x:r+g,y:m-g}),H.add({x:f,y:m-g})):(H.add({x:E,y:J-g}),H.add({x:r+g,y:J-g}),H.add({x:r+g,y:m+g}),H.add({x:f,y:m+g})),d(H,W)}),p("extend.west",function(S,I,s){var F=new P,U=S.s(D)+l(S,s),K=S.s(w),m=S._40I instanceof Y.Edge,W=S._41I instanceof Y.Edge,h=a(s,S),G=h.x-(K||m?0:o(s,S._40I)/2),k=h.y,v=Z(s,S),Q=v.x-(K||W?0:o(s,S._41I)/2),c=v.y,H=q(G,Q)-U;return k>c?(F.add({x:G,y:k+I}),F.add({x:H-I,y:k+I}),F.add({x:H-I,y:c-I}),F.add({x:Q,y:c-I})):(F.add({x:G,y:k-I}),F.add({x:H-I,y:k-I}),F.add({x:H-I,y:c+I}),F.add({x:Q,y:c+I})),d(F,S)}),p("extend.north",function(K,t,V){var r=new P,i=K.s(D)+l(K,V),F=K.s(w),n=K._40I instanceof Y.Edge,Q=K._41I instanceof Y.Edge,S=a(V,K),y=S.x,k=S.y-(F||n?0:E(V,K._40I)/2),f=Z(V,K),N=f.x,$=f.y-(F||Q?0:E(V,K._41I)/2),U=q(k,$)-i;return y>N?(r.add({y:k,x:y+t}),r.add({y:U-t,x:y+t}),r.add({y:U-t,x:N-t}),r.add({y:$,x:N-t})):(r.add({y:k,x:y-t}),r.add({y:U-t,x:y-t}),r.add({y:U-t,x:N+t}),r.add({y:$,x:N+t})),d(r,K)}),p("extend.south",function(m,N,r){var V=new P,B=m.s(D)+l(m,r),b=m.s(w),j=m._40I instanceof Y.Edge,_=m._41I instanceof Y.Edge,u=a(r,m),y=u.x,R=u.y+(b||j?0:E(r,m._40I)/2),I=Z(r,m),T=I.x,o=I.y+(b||_?0:E(r,m._41I)/2),S=s(R,o)+B;return y>T?(V.add({y:R,x:y+N}),V.add({y:S+N,x:y+N}),V.add({y:S+N,x:T-N}),V.add({y:o,x:T-N})):(V.add({y:R,x:y-N}),V.add({y:S+N,x:y-N}),V.add({y:S+N,x:T+N}),V.add({y:o,x:T+N})),d(V,m)});var W=function(f,i,$,J,Z){if(J.sort(function(l,G){var Z=l.getSourceAgent()===i?l.getTargetAgent():l.getSourceAgent(),n=G.getSourceAgent()===i?G.getTargetAgent():G.getSourceAgent(),c=Z.p(),q=n.p();if($===O||$===L){if(c.y>q.y)return 1;if(c.y<q.y)return-1}else{if(c.x>q.x)return 1;if(c.x<q.x)return-1}return u.sortFunc(l.getId(),G.getId())}),Z){for(var t,h,V,X=f.getSourceAgent(),s=f.getTargetAgent(),p=0;p<J.size();p++){var E=J.get(p);E.getSourceAgent()===X&&E.getTargetAgent()===s||E.getTargetAgent()===X&&E.getSourceAgent()===s?(h||(h=new P),h.add(E,0)):h?(V||(V=new P),V.add(E)):(t||(t=new P),t.add(E))}J.clear(),t&&J.addAll(t),h&&J.addAll(h),V&&J.addAll(V)}var _=J.indexOf(f),F=J.size(),B=f.s(e);return{side:$,index:_,size:F,offset:-B*(F-1)/2+B*_}},h=function(m,r,O,z,L){var B=r.s(X);return W(r,O,z,O.getAgentEdges().toList(function(N){return m.isVisible(N)&&N.s(X)===B}),L)},A=function(w,U){var n=w.getSourceAgent()===U?w.getTargetAgent():w.getSourceAgent(),B=U.p(),Y=n.p(),o=Y.x-B.x,r=Y.y-B.y;return o>0&&z(r)<=o?L:0>o&&z(r)<=-o?O:r>0&&z(o)<=r?G:T},v=function(D,x,m){var U=x.s(X),R=A(x,m);return W(x,m,R,m.getAgentEdges().toList(function(B){return D.isVisible(B)&&B.s(X)===U&&A(B,m)===R}))},H=function(J,C){var v=J.getSourceAgent()===C,l=v?J.getTargetAgent():J.getSourceAgent(),X=C.p(),g=l.p();return v?X.y>g.y?T:G:X.x<g.x?L:O},S=function(E,y,o){var v=y.s(X),h=H(y,o);return W(y,o,h,o.getAgentEdges().toList(function(W){return E.isVisible(W)&&W.s(X)===v&&H(W,o)===h}),h===L||h===G)},C=function(w,j){var z=w.getSourceAgent()===j,v=z?w.getTargetAgent():w.getSourceAgent(),Z=j.p(),I=v.p();return z?Z.x<I.x?L:O:Z.y>I.y?T:G},f=function(r,c,w){var U=c.s(X),N=C(c,w);return W(c,w,N,w.getAgentEdges().toList(function(L){return r.isVisible(L)&&L.s(X)===U&&C(L,w)===N}),N===L||N===G)},j=function(M,X,z){var e=M.getSourceAgent(),h=M.getTargetAgent(),y=e.getId()>h.getId(),k=y?h:e,S=y?e:h,N=k.p(),I=S.p(),n=z(X,M,k),A=z(X,M,S),J=M.s(w),x=J?0:o(X,k)/2,C=J?0:o(X,S)/2,U=J?0:E(X,k)/2,j=J?0:E(X,S)/2,D=n.offset,H=A.offset,_=n.side,V=A.side,t=new P;return _===T?(t.add({x:N.x+D,y:N.y-U}),t.add({x:N.x+D,y:I.y+H}),V===O?t.add({x:I.x-C,y:I.y+H}):t.add({x:I.x+C,y:I.y+H})):_===G?(t.add({x:N.x+D,y:N.y+U}),t.add({x:N.x+D,y:I.y+H}),V===O?t.add({x:I.x-C,y:I.y+H}):t.add({x:I.x+C,y:I.y+H})):_===O?(t.add({x:N.x-x,y:N.y+D}),t.add({x:I.x+H,y:N.y+D}),V===G?t.add({x:I.x+H,y:I.y+j}):t.add({x:I.x+H,y:I.y-j})):_===L&&(t.add({x:N.x+x,y:N.y+D}),t.add({x:I.x+H,y:N.y+D}),V===G?t.add({x:I.x+H,y:I.y+j}):t.add({x:I.x+H,y:I.y-j})),y&&t.reverse(),d(t,M)};p("ortho2",function(R,K,z){var p,V,D=R.s(w),a=R.s("edge.ortho"),Y=R.getSourceAgent(),b=R.getTargetAgent(),$=Y.getId()>b.getId(),g=$?b:Y,U=$?Y:b,r=g.p(),S=U.p(),f=v(z,R,g),Z=v(z,R,U),J=D?0:o(z,g)/2,H=D?0:E(z,g)/2,y=D?0:o(z,U)/2,h=D?0:E(z,U)/2,s=new P,N=f.offset,A=Z.offset,M=f.side;return M===L?(p=S.y>r.y?-N:N,V=r.x+J+(S.x-y-r.x-J)*a,s.add({x:r.x+J,y:r.y+N}),s.add({x:V+p,y:r.y+N}),s.add({x:V+p,y:S.y+A}),s.add({x:S.x-y,y:S.y+A})):M===O?(p=S.y>r.y?-N:N,V=r.x-J-(r.x-J-S.x-y)*a,s.add({x:r.x-J,y:r.y+N}),s.add({x:V-p,y:r.y+N}),s.add({x:V-p,y:S.y+A}),s.add({x:S.x+y,y:S.y+A})):M===G?(p=S.x>r.x?-N:N,V=r.y+H+(S.y-h-r.y-H)*a,s.add({x:r.x+N,y:r.y+H}),s.add({x:r.x+N,y:V+p}),s.add({x:S.x+A,y:V+p}),s.add({x:S.x+A,y:S.y-h})):M===T&&(p=S.x>r.x?-N:N,V=r.y-H-(r.y-H-S.y-h)*a,s.add({x:r.x+N,y:r.y-H}),s.add({x:r.x+N,y:V-p}),s.add({x:S.x+A,y:V-p}),s.add({x:S.x+A,y:S.y+h})),$&&s.reverse(),d(s,R)},!0),p("flex2",function(X,t,F){var $,D=X.getSourceAgent(),J=X.getTargetAgent(),g=D.getId()>J.getId(),I=g?J:D,n=g?D:J,V=I.p(),Q=n.p(),R=v(F,X,I),i=v(F,X,n),b=X.s(w),y=X.s("edge.flex")+(R.size-1)/2*X.s(e),c=b?0:o(F,I)/2,f=b?0:E(F,I)/2,m=b?0:o(F,n)/2,x=b?0:E(F,n)/2,N=new P,h=R.offset,C=i.offset,u=R.side;return u===L?($=Q.y>V.y?-h:h,N.add({x:V.x+c,y:V.y+h}),N.add({x:V.x+c+y+$,y:V.y+h}),N.add({x:Q.x-m-y+$,y:Q.y+C}),N.add({x:Q.x-m,y:Q.y+C})):u===O?($=Q.y>V.y?-h:h,N.add({x:V.x-c,y:V.y+h}),N.add({x:V.x-c-y-$,y:V.y+h}),N.add({x:Q.x+m+y-$,y:Q.y+C}),N.add({x:Q.x+m,y:Q.y+C})):u===G?($=Q.x>V.x?-h:h,N.add({x:V.x+h,y:V.y+f}),N.add({x:V.x+h,y:V.y+f+y+$}),N.add({x:Q.x+C,y:Q.y-x-y+$}),N.add({x:Q.x+C,y:Q.y-x})):u===T&&($=Q.x>V.x?-h:h,N.add({x:V.x+h,y:V.y-f}),N.add({x:V.x+h,y:V.y-f-y-$}),N.add({x:Q.x+C,y:Q.y+x+y-$}),N.add({x:Q.x+C,y:Q.y+x})),g&&N.reverse(),d(N,X)},!0),p("extend.north2",function(N,R,c){var S=N.getSourceAgent(),j=N.getTargetAgent(),V=S.getId()>j.getId(),y=V?j:S,f=V?S:j,$=y.p(),M=f.p(),x=h(c,N,y,T),m=h(c,N,f,T,!0),t=N.s(w),l=t?0:E(c,y)/2,U=t?0:E(c,f)/2,K=x.offset,Y=m.offset,v=N.s(D)+(x.size-1)/2*N.s(e),A=q($.y-l,M.y-U)-v+($.x<M.x?K:-K),i=new P;return i.add({x:$.x+K,y:$.y-l}),i.add({x:$.x+K,y:A}),i.add({x:M.x+Y,y:A}),i.add({x:M.x+Y,y:M.y-U}),V&&i.reverse(),d(i,N)},!0),p("extend.south2",function(_,Y,$){var z=_.getSourceAgent(),y=_.getTargetAgent(),i=z.getId()>y.getId(),c=i?y:z,M=i?z:y,j=c.p(),W=M.p(),K=h($,_,c,G),p=h($,_,M,G,!0),T=_.s(w),H=T?0:E($,c)/2,O=T?0:E($,M)/2,J=K.offset,v=p.offset,V=_.s(D)+(K.size-1)/2*_.s(e),X=s(j.y+H,W.y+O)+V+(j.x>W.x?J:-J),n=new P;return n.add({x:j.x+J,y:j.y+H}),n.add({x:j.x+J,y:X}),n.add({x:W.x+v,y:X}),n.add({x:W.x+v,y:W.y+O}),i&&n.reverse(),d(n,_)},!0),p("extend.west2",function(J,W,u){var L=J.getSourceAgent(),O=J.getTargetAgent(),N=L.getId()>O.getId(),C=N?O:L,i=N?L:O,Z=C.p(),j=i.p(),a=h(u,J,C,T),s=h(u,J,i,T,!0),k=J.s(w),v=k?0:o(u,C)/2,g=k?0:o(u,i)/2,X=a.offset,m=s.offset,f=J.s(D)+(a.size-1)/2*J.s(e),Y=q(Z.x-v,j.x-g)-f+(Z.y<j.y?X:-X),p=new P;return p.add({x:Z.x-v,y:Z.y+X}),p.add({x:Y,y:Z.y+X}),p.add({x:Y,y:j.y+m}),p.add({x:j.x-g,y:j.y+m}),N&&p.reverse(),d(p,J)},!0),p("extend.east2",function(q,I,Y){var E=q.getSourceAgent(),f=q.getTargetAgent(),c=E.getId()>f.getId(),l=c?f:E,R=c?E:f,N=l.p(),A=R.p(),z=h(Y,q,l,T),Q=h(Y,q,R,T,!0),W=q.s(w),X=W?0:o(Y,l)/2,j=W?0:o(Y,R)/2,F=z.offset,M=Q.offset,_=q.s(D)+(z.size-1)/2*q.s(e),m=s(N.x+X,A.x+j)+_+(N.y>A.y?F:-F),C=new P;return C.add({x:N.x+X,y:N.y+F}),C.add({x:m,y:N.y+F}),C.add({x:m,y:A.y+M}),C.add({x:A.x+j,y:A.y+M}),c&&C.reverse(),d(C,q)},!0),p("v.h2",function(b,l,_){return j(b,_,S)},!0),p("h.v2",function(S,l,m){return j(S,m,f)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);