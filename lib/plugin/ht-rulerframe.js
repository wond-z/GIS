!function(i,J){"use strict";var j="position",q="absolute",$="relative",s="px",R="left",K="right",T="top",G="bottom",b="display",w="none",z="block",_=ht.Default,N=_.getInternal(),S=Math.floor,l=Math.ceil,I=Math.PI,v=null,m=i.parseInt,x=function(O){return O.getContext("2d")},V=function(){return document},h=function(s){return V().createElement(s)},f=function(){return h("canvas")},y=function(T,u,I){T.style.setProperty(u,I,v)},O=function(f,v,h){_.def(ht.widget[f],v,h)},P=function(l,D){l.appendChild(D)},A=function(Q,o){Q.removeChild(o)},N=_.getInternal(),d=N.addEventListener,e=N.removeEventListener;ht.widget.RulerFrame=function(I){var b=this,s=b._view=N.createView(null,b),A=b.$1k=f(),V=b.$2k=f(),m=b.$3k=f(),C=b.$4k=f();b._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},b._topRulerConfig={visible:!0},b._rightRulerConfig={visible:!1},b._bottomRulerConfig={visible:!1},b._leftRulerConfig={visible:!0},P(s,A),P(s,m),P(s,V),P(s,C),y(s,j,$),y(s,"box-sizing","border-box"),y(s,"-moz-box-sizing","border-box"),y(A,j,q),y(V,j,q),y(m,j,q),y(C,j,q),b.$14k=function(){b.$13k=1,b.iv()},b.$15k=function(S){if(b._topRulerConfig.guideVisible||b._rightRulerConfig.guideVisible||b._bottomRulerConfig.guideVisible||b._leftRulerConfig.guideVisible||b._defaultRulerConfig.guideVisible||(b._topRulerConfig.guideTipVisible||b._rightRulerConfig.guideTipVisible||b._bottomRulerConfig.guideTipVisible||b._leftRulerConfig.guideTipVisible||b._defaultRulerConfig.guideTipVisible)&&b._component){var O=s.getBoundingClientRect();b.$16k={x:S.clientX-O.left,y:S.clientY-O.top},b.$5k()}},b.setComponent(I)},O("RulerFrame",J,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(f){var p=this,E=p._component,Q=p.getView();if(Q){if(p._component=f,p.fp("component",E,f),E){var l=p.getComponentView(E);A(Q,l),e(Q,"mousemove",p.$15k),p.removeComponentPropertyChangeListener(E,p.$14k)}if(f){var X=p.getComponentView(f);P(Q,X),y(X,j,q),d(Q,"mousemove",p.$15k),p.addComponentPropertyChangeListener(f,p.$14k)}}},addComponentPropertyChangeListener:function(h,O){h&&h.mp&&h.mp(O)},removeComponentPropertyChangeListener:function(E,g){E&&E.ump&&E.ump(g)},getComponentHZoom:function(P){return P&&P.getZoom?P.getZoom():1},getComponentVZoom:function(U){return U&&U.getZoom?U.getZoom():1},getComponentViewRect:function(S){return S&&S.getViewRect?S.getViewRect():void 0},getComponentView:function(G){return G&&G.getView?G.getView():G},invalidateComponent:function($){$&&$.iv&&$.iv()},validateComponent:function(k){k&&k.validate&&k.validate()},$7k:function(c,g,x,A,F,Z,R,T,j,B,D,m){if(g.visible){var O=this._defaultRulerConfig,o="borderStyle",u="borderColor",t="borderWidth",L="background",e=g[o]||O[o],d=g[u]||O[u],k=g[t]||O[t],Q=g.size!=v?g.size:O.size,S=g[L]||O[L],r=Q+k,n=this.$6k(k,e,d,c,x,F,r,R,T,j,B,D,m);y(c,F,"0px"),Z?N.setCanvas(c,A-n,Q):N.setCanvas(c,Q,A-n),y(c,"background",S),y(c,b,z)}else y(c,b,w),y(this.getComponentView(this._component),F,"0px")},$6k:function(Y,Z,N,F,c,P,b,o,C,A,a,D,_){var R=0;return y(F,c,Y+"px "+Z+" "+N),y(this.getComponentView(this._component),P,b+s),o?(y(F,C,A+s),R+=A):y(F,C,"0px"),a?(y(F,D,_+s),R+=_):y(F,D,"0px"),R},validateImpl:function(){var t=this,u=t._component,n=t.$1k,M=t.$2k,N=t.$3k,a=t.$4k,z=t._view,m=t._defaultRulerConfig,o=t._topRulerConfig,r=t._rightRulerConfig,E=t._bottomRulerConfig,g=t._leftRulerConfig,W=m.size;if(z&&u){var C=o.size!=v?o.size:W,f=r.size!=v?r.size:W,c=E.size!=v?E.size:W,O=g.size!=v?g.size:W;t.$7k(n,o,"border-bottom",z.offsetWidth,T,!0,g.visible,R,O,r.visible,K,f),t.$7k(M,r,"border-left",z.offsetHeight,K,!1,o.visible,T,C,E.visible,G,c),t.$7k(N,E,"border-top",z.offsetWidth,G,!0,g.visible,R,O,r.visible,K,f),t.$7k(a,g,"border-right",z.offsetHeight,R,!1,o.visible,T,C,E.visible,G,c),t.$13k?delete t.$13k:t.invalidateComponent(u),t.validateComponent(u),t.$5k()}},$5k:function(){function U(E,j,K,B,w,y){if(j.visible){var _=x(E),U=j[m]||Z,X=j[I]!=v?j[I]:s,N=j[h]||l,C=j[L]||R,M=j.size!=v?j.size:d,no=j[Y]||S,Ze=j[O]||$,fk=j[H]||t,cj=j[Q]!=v?j[Q]:W,Ir=j[u]!=v?j[u]:c,jb=j[J]!=v?j[J]:i,Wm=j[P]!=v?j[P]:e,Ui=j[a]!=v?j[a]:b,rp=j[T]!=v?j[T]:F,Xk=j[r]||pr,cg=j[D]||Rj;X&&(U=V[y]=V.$8k(V[y]||U,j[g]||f,j[k]||z,B?q:n,Ze)),K.call(V,_,p,A,o,G,M,B?q:n,U,N,C,w,no,fk);var Cl=V.$16k;(cj||Ir)&&Cl&&(B?V.$9k(_,Cl.x,M,Xk,cg,cj,Ir,jb,Wm,Ui,rp):V.$10k(_,Cl.y,M,Xk,cg,cj,Ir,jb,Wm,Ui,rp,w))}}var V=this,w=V.$1k,B=V.$2k,M=V.$3k,E=V.$4k,j=V._topRulerConfig,N=V._rightRulerConfig,C=V._bottomRulerConfig,X=V._leftRulerConfig,_=V._defaultRulerConfig,y=V._component,K=V.getComponentViewRect(y),q=V.getComponentHZoom(y),n=V.getComponentVZoom(y),p=K.x*q,o=p+K.width*q,A=K.y*n,G=A+K.height*n,d=V._defaultRulerConfig.size,m="defaultMajorTickSpacing",g="maxPhysicalMajorTickSpacing",k="minPhysicalMajorTickSpacing",I="tickSpacingAdaptable",h="majorTickTextFont",L="majorTickTextColor",Y="majorTickColor",H="minorTickColor",Q="guideVisible",u="guideTipVisible",J="guideTipBorderColor",P="guideTipTextColor",a="guideTipTextFont",T="guideTipBackground",r="guideColor",D="guideWidth",O="minMajorTickSpacing",Z=_[m],f=_[g],z=_[k],s=_[I],l=_[h],R=_[L],S=_[Y],$=_[O],t=_[H],W=_[Q],c=_[u],i=_[J],e=_[P],b=_[a],F=_[T],pr=_[r],Rj=_[D];V._view&&y&&(U(w,j,V.$11k,!0,!1,"_currentTopMajorTickSpacing"),U(B,N,V.$12k,!1,!0,"_currentRightMajorTickSpacing"),U(M,C,V.$11k,!0,!0,"_currentBottomMajorTickSpacing"),U(E,X,V.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(y,V,v,$,o){return v>y*$?y=S(V/$/o)*o:y*$>V&&(y=l(v/$/o)*o),y},getHTipText:function(J){var L=this,v=L._component,K=0,l=L._view.getBoundingClientRect();return v.lp?K=m(v.lp({x:J.x+l.left,y:J.y}).x):K-=m(this.getComponentView(v).style.left)||0,K},$9k:function(w,z,T,Z,L,n,V,X,Y,t,W){var p=this,r=p._component;w.save(),N.translateAndScale(w,0,0,1);var M=z-(m(this.getComponentView(r).style.left)||0),a=0;if(z=p.getHTipText(p.$16k),n&&(w.beginPath(),w.fillStyle=Z,w.rect(M,a,L,T),w.fill()),V){w.beginPath(),w.textAlign="center",w.textBaseline="middle",w.font=t;var y=w.measureText(z).width+6;w.fillStyle=W,w.rect(M-y/2,a,y,T),w.fill(),w.strokeStyle=X,w.stroke(),w.beginPath(),w.fillStyle=Y,w.fillText(z,M,a+T/2)}w.restore()},getVTipText:function(L){var T=this,I=T._component,P=0,u=T._view.getBoundingClientRect();return I.lp?P=m(I.lp({x:L.x,y:L.y+u.top}).y):P-=m(this.getComponentView(I).style.top)||0,P},formatScaleText:function(G){return Math.round(G)},$10k:function(u,y,r,X,c,M,W,U,s,i,Z,O){var p=this,e=p._component;u.save(),N.translateAndScale(u,0,0,1);var Y=r/2,J=y-(m(this.getComponentView(e).style.top)||0);if(y=p.getVTipText(p.$16k),M&&(u.beginPath(),u.fillStyle=X,u.rect(Y-r/2,J,r,c),u.fill()),W){u.translate(Y,J),u.rotate((O?90:-90)*I/180),u.translate(-Y,-J),u.beginPath(),u.textAlign="center",u.textBaseline="middle",u.font=i;var l=u.measureText(y).width+6;u.fillStyle=Z,u.rect(Y-l/2,J-r/2,l,r),u.fill(),u.strokeStyle=U,u.stroke(),u.fillStyle=s,u.fillText(y,Y,J)}u.restore()},$11k:function(Q,j,F,b,c,h,B,M,n,t,D,l,y){Q.save(),F=0;var U=j,z=b,u=(U+z)/2;j=0,b=z-U,N.translateAndScale(Q,0,0,1);var Z=0,H=0,P=m(h/2),G=h-P,L=D?0:P,f=M*B,v=f/10;j-=f,b+=f,Q.clearRect(j,0,b-j,h),Q.beginPath(),Q.fillStyle=y;var d=S(u/v)*v-U;for(Z=d;b>Z;Z+=v)Q.rect(Z,F+L,1,G);for(Z=d;Z>j;Z-=v)Q.rect(Z,F+L,1,G);for(Q.fill(),L=D?0:1,Q.beginPath(),Q.fillStyle=l,d=S(u/f)*f-U,Z=d;b>Z;Z+=f)Q.rect(Z,F+L,1,h-1);for(Z=d;Z>j;Z-=f)Q.rect(Z,F+L,1,h-1);Q.fill();var R=m(/\d+px/.exec(n)[0]),r=(R||10)/2;Q.textBaseline="middle",L=D?h-r-2:r+2,Q.beginPath(),Q.fillStyle=t,Q.font=n;var W=S(u/f)*f/B;for(Z=d,H=W;b>Z;Z+=f,H+=M){var e=this.getHScaleText?this.getHScaleText(Z):H;Q.fillText(this.formatScaleText(e),Z+2,F+L)}for(Z=d,H=W;Z>j;Z-=f,H-=M){var e=this.getHScaleText?this.getHScaleText(Z):H;Q.fillText(this.formatScaleText(e),Z+2,F+L)}Q.restore()},$12k:function(t,w,W,z,L,o,h,j,_,c,D,Y,M){function s(H,l,$,Z,E,U){E=O.getVScaleText?O.getVScaleText($):E,E=O.formatScaleText(E),t.translate(H+l,$),t.rotate(-Z),t.translate(-H-l,-$),t.fillText(E,H+l+(U?2:1),$),t.translate(H+l,$),t.rotate(Z),t.translate(-H-l,-$)}t.save(),w=0;var Z=W,R=L,Q=(Z+R)/2;W=0,L=R-Z,N.translateAndScale(t,0,0,1);var $=0,O=this,F=0,V=m(o/2),P=o-V,U=D?0:V,p=j*h,r=p/10;W-=p,L+=p,t.clearRect(w,0,o,L-W),t.beginPath(),t.fillStyle=M;var f=S(Q/r)*r-Z;for($=f;L>$;$+=r)t.rect(w+U,$,P,1);for($=f;$>W;$-=r)t.rect(w+U,$,P,1);for(t.fill(),U=D?0:1,t.beginPath(),t.fillStyle=Y,f=S(Q/p)*p-Z,$=f;L>$;$+=p)t.rect(w+U,$,o-1,1);for($=f;$>W;$-=p)t.rect(w+U,$,o-1,1);t.fill();var u=m(/\d+px/.exec(_)[0]),k=(u||10)/2,d=90*I/180;t.textBaseline="middle",U=D?o-k:k+2,d=D?-d:d,t.beginPath(),t.fillStyle=c,t.font=_;var A=S(Q/p)*p/h;for($=f,F=A;L>$;$+=p,F+=j)s(w,U,$,d,F,D);for($=f,F=A;$>W;$-=p,F-=j)s(w,U,$,d,F,D);t.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var M=this,T=M._component,p=M._view;T&&M.removeComponentPropertyChangeListener(T,M.$14k),p&&(e(p,"mousemove",M.$15k),A(p.parentNode,p),M._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);