!function(m,X){"use strict";var h="ht",b=m[h],l="innerHTML",y="className",u=null,e="px",P=b.Default,j=P.getInternal(),a="0",S=function(){return document},f=function(o){return S().createElement(o)},k=function(){return f("canvas")},M=function(I,c,H){I.style.setProperty(c,H,u)},Y=function(J,v,n){P.def(b.widget[J],v,n)},G=function(i,g){i.appendChild(g)},D=function(o,L){o.removeChild(L)},o=j.addEventListener,L=j.removeEventListener,_=P.isTouchable;j.addMethod(P,{menuLabelFont:(_?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),b.widget.Menu=function(O){var T=this,m=T._view=j.createView(null,T),z=T.$1g=new b.widget.ContextMenu,$=f("ul");z._r=!0,z._view[y]+=" ht-widget-dropdownmenu",m[y]="ht-widget-menu",$[y]="header",M(m,"margin",a),M(m,"padding",a),M(m,"background",P.menuBackground),M(m,"-webkit-user-select","none"),M(m,"-moz-user-select","none"),M(m,"user-select","none"),M(m,"text-align","left"),M(m,"border-bottom",P.menuSeparatorWidth+"px solid "+P.menuSeparatorColor),M(m,"cursor","default"),M(m,"overflow","auto"),M(m,"white-space","nowrap"),M(m,"font",P.menuLabelFont),M(m,"color",P.menuLabelColor),M(m,"box-sizing","border-box"),M(m,"-moz-box-sizing","border-box"),M($,"list-style","none"),M($,"margin",a),M($,"padding",a),M($,"display","inline-block"),G(m,$),T.setItems(O),T.$2g=function($){T.$3g($)},T.$4g=function(M){T.$5g(M)},T.$6g=function(Q){T.$7g(Q)},T.$8g=function(h){T.$9g(h)},T.$9b=function(C){T.$10g(C)},T._autoShow=!0,T.setAutoShow(!1),z.afterHide=function(){T.$11g()},z.afterShow=function(){T.$12g()},L(S(),"keydown",z.$3b),T.$3b=function(O){T.$13g(O)},T.invalidate()},Y("Menu",X,{_items:u,$14g:P.menuHoverBackground,$15g:P.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(q){var p=this;if(p.$21g=q,p.setItems(p._items),"largeicons"===q){for(var U=p._view.querySelectorAll(".header-item"),J=0,b=0;b<U.length;b++){var y=U[b];J=Math.max(J,y.clientWidth)}for(var b=0;b<U.length;b++){var y=U[b];M(y,"min-width",J+e)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(y){this.$22g=y;for(var V=this._view.querySelectorAll(".header-item"),B=0;B<V.length;B++){var Z=V[B];M(Z,"margin-left",y+e),M(Z,"margin-right",y+e)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(w){this.$23g=w;for(var y=this._view.querySelectorAll(".header-item"),x=0;x<y.length;x++){var Q=y[x];M(Q,"margin-top",w+e),M(Q,"margin-bottom",w+e)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(Z){this.$24g=Z,M(this._view,"text-align",Z)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var s=this,D=s._enableGlobalKey;D===!1&&(o(S(),"keydown",s.$3b),s._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,L(S(),"keydown",this.$3b)},setHoverBackground:function(b){this.$14g=b},setHoverColor:function(R){this.$15g=R},setItems:function(u){var n=this,F=n._view,s=n.$21g;if(n._items=u,F.children[0][l]="",n.$16g={},u&&u.length){for(var j=F.children[0],B=0,v=S().createDocumentFragment();B<u.length;B++){var J=u[B],h=f("li"),V=f("span");if(J.icon){var L=k();L[y]="menu-item-icon","smallicons"===s?(M(L,"height","1.2em"),M(L,"width","1.2em"),M(L,"vertical-align","middle")):(M(L,"height","32px"),M(L,"width","32px"),M(L,"display","block"),M(L,"margin","0 auto")),L.$20g=J.icon,G(h,L)}h[y]="header-item",M(h,"display","inline-block"),M(h,"vertical-align","top"),M(h,"padding","0 1.2em"),M(h,"line-height","1.8em"),"largeicons"===s&&M(h,"text-align","center"),M(h,"background-color","rgba(0,0,0,0)"),h.setAttribute("data-index",B),n.$16g[B]=J.items,V[l]=J.label,"iconsonly"!==s&&G(h,V),G(v,h)}G(j,v)}},showDropdownMenu:function(r){var z=this,N=z.$16g[r],X=z.$1g,$=z._view.children[0].children[r],A=z.$17g;if($&&$!==A){A&&z.hideDropdownMenu();var V=$.getBoundingClientRect(),Q=P.getWindowInfo();z.$17g=$,X.setItems(N),X.show(V.left+Q.left,V.top+V.height+Q.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(s,e){var $=this,c=$._items;return c&&0!==c.length?$.$1g.getItemByProperty(s,e,c):u},$12g:function(){var z=this,f=z.$17g;f.style.background=z.$14g,f.style.color=z.$15g,z._autoShow||o(S(),_?"touchstart":"mousedown",z.$9b)},$11g:function(){var z=this,f=z.$17g;f&&(f.style.background="",f.style.color="",z.$17g=u),L(S(),_?"touchstart":"mousedown",z.$9b)},$10g:function(L){var R=this,f=R._view,t=R.$1g,v=f.children[0];!S().body.contains(f)||v.contains(L.target)||t._view.contains(L.target)||R.hideDropdownMenu()},$13g:function(b){var g=this,v=g.$1g;S().body.contains(g._view)&&v.$13b.$4b.call(v.$13b,b,g._items)},setAutoShow:function(D){var f=this,i=f.$1g,Q=f._view;f._autoShow!==D&&(f._autoShow?(L(Q,"mouseover",f.$2g),L(Q,"mouseout",f.$4g),L(i._view,"mouseout",f.$4g),_||(o(Q,"mouseover",f.$8g),o(Q,"mouseout",f.$8g)),o(Q,_?"touchstart":"mousedown",f.$6g)):(L(Q,"mouseover",f.$8g),L(Q,"mouseout",f.$8g),L(Q,_?"touchstart":"mousedown",f.$6g),L(S(),_?"touchstart":"mousedown",f.$9b),_||(o(Q,"mouseover",f.$2g),o(Q,"mouseout",f.$4g),o(i._view,"mouseout",f.$4g))),f._autoShow=D)},$3g:function(f){var P=this,w=P._view.children[0],$=f.target;if(w!==$&&w.contains($)){for(;"header-item"!==$[y];)$=$.parentNode;P.showDropdownMenu($.getAttribute("data-index"))}},$5g:function(J){var o=this,u=o._view.children[0],C=o.$1g,N=J.target,$=J.relatedTarget;!u.contains(N)&&!C._view.contains(N)||u.contains($)||C._view.contains($)||o.hideDropdownMenu()},$7g:function(U){U.preventDefault();var L=this,j=L._view.children[0],I=L.$1g,g=U.target;if(P.isLeftButton(U)&&j!==g&&j.contains(g))if(_){for(;"header-item"!==g[y];)g=g.parentNode;var z=g.getAttribute("data-index"),I=L.$1g,o=L._view.children[0].children[z],n=L.$17g;I.isShowing()&&L.hideDropdownMenu(),o!==n&&L.showDropdownMenu(z)}else if(I.isShowing())L.hideDropdownMenu();else{for(;"header-item"!==g[y];)g=g.parentNode;L.showDropdownMenu(g.getAttribute("data-index"))}},$9g:function(w){var $=this,q=$._view,Y=$.$1g,E=w.target;if(q.contains(E)){for(var b=q.querySelectorAll(".header-item"),t=u,W=0;W<b.length;W++){var X=b[W];X.style.background="",X.style.color="","mouseover"===w.type?X.contains(E)&&(t=X):"mouseout"===w.type&&Y.isShowing()&&$.$17g===X&&(t=X)}Y.isShowing()&&(t||(t=$.$17g),$.showDropdownMenu(t.getAttribute("data-index"))),t&&(t.style.background=$.$14g,t.style.color=$.$15g)}},getShowingMenuIndex:function(){var j=this.$17g;return j?j.getAttribute("data-index"):-1},addTo:function(X){var O=this,i=O._view;G(X,i),O.invalidate()},dispose:function(){var f=this,N=f._view,k=f.$1g;N&&(f._autoShow?(L(N,"mouseover",f.$2g),L(N,"mouseout",f.$4g),L(k._view,"mouseout",f.$4g)):(L(N,"mouseover",f.$8g),L(N,"mouseout",f.$8g),L(N,_?"touchstart":"mousedown",f.$6g),L(S(),_?"touchstart":"mousedown",f.$9b)),L(S(),"keydown",f.$3b),k.dispose(),N.parentNode&&D(N.parentNode,N),f._view=f.$1g=f.$16g=f._items=f.$17g=f.$2g=f.$4g=f.$6g=f.$8g=f.$9b=f.$3b=u)},$19g:function(q,r,o,u){var i=j.initContext(q);j.translateAndScale(i,0,0,1),i.clearRect(0,0,o,u),P.drawStretchImage(i,P.getImage(r),"fill",0,0,o,u),i.restore()},validateImpl:function(){var R,Y,F,d=this,x=d._view,m=x.querySelectorAll(".menu-item-icon");for(F=0;F<m.length;F++){var V=m[F];R=V.clientWidth,Y=V.clientHeight,R&&Y&&(j.setCanvas(V,R,Y),d.$19g(V,P.getImage(V.$20g),R,Y))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);